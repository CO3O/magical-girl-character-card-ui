<head><script type="module">import{waitUntil as e}from'https://testingcf.jsdelivr.net/npm/async-wait-until/+esm';import{createPinia as t,defineStore as a}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{registerMvuSchema as n}from'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';var l={262(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}}},r={};const o=Vue,c={default:{0:''}};let s={...c},i=!1;const d='[Data]头像库';async function u(){if(!i){try{const e=await getCharWorldbookNames('current'),t=e.primary||e.additional[0];if(!t)return console.warn('当前角色卡没有绑定世界书，使用默认头像库'),void(i=!0);const a=(await getWorldbook(t)).find(e=>e.name===d);if(a&&a.content)try{const e=JSON.parse(a.content);e&&'object'==typeof e&&(s={...c,...e},console.log('从世界书条目加载头像库成功'))}catch(e){console.error('解析头像库数据失败:',e)}else console.log('世界书中未找到头像库数据，使用默认头像库')}catch(e){console.error('加载头像库失败:',e)}i=!0}}async function m(){try{const e=await getCharWorldbookNames('current'),t=e.primary||e.additional[0];if(!t)return void console.error('当前角色卡没有绑定世界书，无法保存头像库');await updateWorldbookWith(t,e=>{const t=e.findIndex(e=>e.name===d),a={name:d,enabled:!1,strategy:{type:'constant',keys:[],keys_secondary:{logic:'and_any',keys:[]},scan_depth:'same_as_global'},position:{type:'at_depth',role:'system',depth:0,order:0},content:JSON.stringify(s),probability:100,recursion:{prevent_incoming:!0,prevent_outgoing:!0,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}};return t>=0?e[t]={...e[t],...a}:e.push(a),e}),console.log('保存头像库到世界书成功')}catch(e){console.error('保存头像库失败:',e)}}function p(e){if(s[e])return s[e];const t=s.default,a=Object.keys(t).map(Number).filter(e=>e>0);if(a.length>0){const e=Math.min(...a);return{0:t[e]||'',[e]:t[e]||''}}return s.default}function v(e,t){const a=p(e)[t];if(a)return a;if(0===t&&!s[e]){const e=s.default,t=Object.keys(e).map(Number).filter(e=>e>0);if(t.length>0){return e[Math.min(...t)]||''}}return''}async function b(e,t,a){s[e]||(s[e]={}),s[e][t]=a,await m()}function g(e){const t=p(e),a=Object.keys(t).map(Number).filter(e=>e>0);return 0===a.length?1:Math.max(...a)+1}function f(e){return!!(0,o.getCurrentScope)()&&((0,o.onScopeDispose)(e),!0)}u();const y='undefined'!=typeof window&&'undefined'!=typeof document;'undefined'!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString;function k(e,t){return function(...a){return new Promise((n,l)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(n).catch(l)})}}const E=e=>e();function h(e){const t=Object.create(null);return a=>t[a]||(t[a]=e(a))}const N=/\B([A-Z])/g,V=(h(e=>e.replace(N,'-$1').toLowerCase()),/-(\w)/g);h(e=>e.replace(V,(_,e)=>e?e.toUpperCase():''));function x(e,t=1e3,a={}){const{immediate:n=!0,immediateCallback:l=!1}=a;let r=null;const c=(0,o.shallowRef)(!1);function s(){r&&(clearInterval(r),r=null)}function i(){c.value=!1,s()}function d(){const a=(0,o.toValue)(t);a<=0||(c.value=!0,l&&e(),s(),c.value&&(r=setInterval(e,a)))}if(n&&y&&d(),(0,o.isRef)(t)||'function'==typeof t){f((0,o.watch)(t,()=>{c.value&&y&&d()}))}return f(i),{isActive:(0,o.shallowReadonly)(c),pause:i,resume:d}}function C(e,t,a={}){const{eventFilter:n=E,...l}=a,r=k(n,t);let c,s,i;if('sync'===l.flush){let t=!1;s=()=>{},c=e=>{t=!0,e(),t=!1},i=(0,o.watch)(e,(...e)=>{t||r(...e)},l)}else{const t=[];let a=0,n=0;s=()=>{a=n},t.push((0,o.watch)(e,()=>{n++},{...l,flush:'sync'})),c=e=>{const t=n;e(),a+=n-t},t.push((0,o.watch)(e,(...e)=>{const t=a>0&&a===n;a=0,n=0,t||r(...e)},l)),i=()=>{t.forEach(e=>e())}}return{stop:i,ignoreUpdates:c,ignorePrevAsyncUpdates:s}}const B=z,w=B.z.object({Avatar:B.z.object({current:B.z.number().int().min(0).prefault(0),history:B.z.array(B.z.number().int().min(0)).prefault([])}).prefault({current:0,history:[]}),Favor:B.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),Magic:B.z.coerce.number().prefault(100),MagicMax:B.z.coerce.number().prefault(100),Corruption:B.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),Description:B.z.array(B.z.string()).prefault([])}),S=B.z.object({Thought:B.z.string().prefault(''),Action:B.z.string().prefault(''),State:B.z.string().prefault('正常'),isTransformed:B.z.boolean().prefault(!1),Lust:B.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0)}),M=B.z.object({当前时间:B.z.string().prefault('2024年03月17日 星期二 16:45'),location:B.z.string().prefault('远谷町-垂枝樱学园-二年3班教室'),个人线:B.z.record(B.z.string().describe('角色个人线名称'),B.z.object({状态:B.z.string().prefault('未开始'),结局:B.z.record(B.z.string().describe('结局名称'),B.z.object({说明:B.z.string().prefault(''),达成条件:B.z.record(B.z.string().describe('条件名称'),B.z.boolean().prefault(!1)).prefault({})})).prefault({})})).prefault({}),角色列表:B.z.record(B.z.string().describe('角色名'),w).prefault({}),在场角色:B.z.record(B.z.string().describe('角色名'),S).prefault({}),Enemies:B.z.record(B.z.string().describe('敌人名'),B.z.any()).prefault({}),Partners:B.z.record(B.z.string().describe('同伴名'),B.z.any()).prefault({}),user:B.z.object({SkillPoint:B.z.coerce.number().prefault(10),Magic:B.z.coerce.number().prefault(100),MagicMax:B.z.coerce.number().prefault(100),Morality:B.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),SkillTree:B.z.record(B.z.string().describe('技能名'),B.z.object({描述:B.z.string().prefault(''),消耗:B.z.coerce.number().prefault(0),已学习:B.z.boolean().prefault(!1)})).prefault({})}).prefault({SkillPoint:10,Magic:100,MagicMax:100,Morality:0,SkillTree:{}})});$(()=>{n(M)});const j=(D=M,'message'!==(T={type:'message',message_id:getCurrentMessageId()}).type||void 0!==T.message_id&&'latest'!==T.message_id||(T.message_id=-1),a(`mvu_data.${_(T).entries().sortBy(e=>e[0]).map(e=>e[1]).join('.')}`,errorCatched(()=>{const e=(0,o.ref)(D.parse(_.get(getVariables(T),'stat_data',{}),{reportInput:!0}));L&&L(e),x(()=>{const a=_.get(getVariables(T),'stat_data',{}),n=D.safeParse(a);n.error||_.isEqual(e.value,n.data)||(t(()=>{e.value=n.data}),_.isEqual(a,n.data)||updateVariablesWith(e=>_.set(e,'stat_data',n.data),T))},2e3);const{ignoreUpdates:t}=C(e,a=>{const n=D.safeParse(a);n.error||(_.isEqual(a,n.data)||t(()=>{e.value=n.data}),updateVariablesWith(e=>_.set(e,'stat_data',n.data),T))},{deep:!0});return{data:e}})));var D,T,L;const A={class:'character-archive'},O={key:0,class:'empty-state'},P={key:1,class:'character-grid'},q=['onClick'],I={class:'character-avatar'},F=['src','alt'],H={key:1,class:'avatar-placeholder'},U={class:'character-info'},W={class:'character-name'},R={class:'character-stats'},G={class:'stat-item'},Z={class:'stat-item'},J={class:'stat-item'},K=(0,o.defineComponent)({__name:'CharacterArchivePanel',emits:['view-character'],setup(e,{emit:t}){const a=j(),n=t,l=(0,o.computed)(()=>a.data.角色列表||{}),r=(0,o.computed)(()=>a.data.在场角色||{});function c(e,t){return v(e,t)}function s(e){return e in r.value}function i(e){return s(e)?'present':'absent'}function d(e){return s(e)?'在场':'不在场'}function u(e){const t=e.target;t.style.display='none';const a=t.parentElement?.querySelector('.avatar-placeholder');a&&(a.style.display='flex')}return(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',A,[0===Object.keys(l.value).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',O,[...t[0]||(t[0]=[(0,o.createElementVNode)('p',null,'暂无角色数据',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',P,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.value,(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:'character-card',onClick:e=>function(e){n('view-character',e)}(a)},[(0,o.createElementVNode)('div',I,[c(a,e.Avatar?.current||0)?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:c(a,e.Avatar?.current||0),alt:a,onError:u},null,40,F)):((0,o.openBlock)(),(0,o.createElementBlock)('div',H,[...t[1]||(t[1]=[(0,o.createElementVNode)('i',{class:'fas fa-user'},null,-1)])]))]),(0,o.createElementVNode)('div',U,[(0,o.createElementVNode)('h3',W,(0,o.toDisplayString)(a),1),(0,o.createElementVNode)('div',R,[(0,o.createElementVNode)('div',G,[t[2]||(t[2]=(0,o.createElementVNode)('i',{class:'fas fa-heart',style:{color:'var(--pink)'}},null,-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.Favor)+'%',1)]),(0,o.createElementVNode)('div',Z,[t[3]||(t[3]=(0,o.createElementVNode)('i',{class:'fas fa-bolt',style:{color:'var(--green)'}},null,-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.Magic)+'/'+(0,o.toDisplayString)(e.MagicMax),1)]),(0,o.createElementVNode)('div',J,[t[4]||(t[4]=(0,o.createElementVNode)('i',{class:'fas fa-skull-crossbones',style:{color:'var(--purple)'}},null,-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.Corruption)+'%',1)])])]),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['character-status-badge',i(a)])},(0,o.toDisplayString)(d(a)),3)],8,q))),128))]))]))}});var Q=function e(t){var a=r[t];if(void 0!==a)return a.exports;var n=r[t]={exports:{}};return l[t](n,n.exports,e),n.exports}(262);const X=(0,Q.A)(K,[['__scopeId','data-v-fc285b32']]),Y={class:'character-detail-panel'},ee={key:0,class:'loading'},te={key:1,class:'character-detail-content'},ae={class:'avatar-section'},ne={class:'avatar-banner'},le=['src','alt'],re={key:1,class:'avatar-placeholder-large'},oe={class:'avatar-bottom-content'},ce={class:'avatar-text-wrapper'},se={class:'character-title'},ie={key:0,class:'avatar-history'},de={class:'history-list'},ue=['onClick'],me=['src','alt'],pe=['onClick'],ve={class:'char-card'},be={class:'char-details'},ge={class:'detail-item'},fe={class:'detail-item'},ye={class:'detail-item'},ke={key:0,class:'stat-bar-container'},Ee={class:'stat-bar-label'},he={class:'stat-bar-value'},Ne={class:'progress-bar'},Ve={key:1,class:'stat-bar-container'},xe={class:'stat-bar-label'},Ce={class:'stat-bar-value'},Be={class:'progress-bar'},we={key:2,class:'stat-bar-container'},Se={class:'stat-bar-label'},ze={class:'stat-bar-value'},Me={class:'progress-bar'},je={key:3,class:'stat-bar-container'},De={class:'stat-bar-label'},Te={class:'stat-bar-value'},Le={class:'progress-bar'},_e={key:4,class:'thought-block'},Ae={key:0,class:'char-card description-card'},$e={class:'description-content'},Oe=(0,o.defineComponent)({__name:'CharacterDetailPanel',props:{characterName:{}},setup(e){let t=!1,a=null;const n=e,l=j(),r=(0,o.computed)(()=>l.data.角色列表?.[n.characterName]),c=(0,o.computed)(()=>l.data.在场角色?.[n.characterName]),i=(0,o.computed)(()=>r.value?.Avatar?.current||0),d=(0,o.computed)(()=>v(n.characterName,i.value)),u=(0,o.computed)(()=>r.value?.Avatar?.history||[]),f=(0,o.computed)(()=>u.value.map(e=>v(n.characterName,e)));function y(e){e.target.style.display='none'}function k(e){const t=e.target;t.parentElement?.classList.add('error')}function E(){if(t||a)return;t=!0;const e=document.createElement('div'),l=p(n.characterName);e.innerHTML=`\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        max-height: 90vh;\n        overflow-y: auto;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">更换头像</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">请选择头像：</p>\n        <div class="avatar-library-grid" style="\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 12px;\n          margin-bottom: 20px;\n        ">\n          ${Object.entries(l).map(([e,t])=>`\n            <div style="\n              border: 2px solid ${i.value==parseInt(e)?'var(--blue)':'var(--border-color)'};\n              border-radius: 8px;\n              overflow: hidden;\n              cursor: pointer;\n              transition: all 0.2s;\n              height: 80px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              background-color: var(--quote-bg-color);\n              position: relative;\n            " data-avatar-id="${e}">\n              ${t?`<img src="${t}" style="width: 100%; height: 100%; object-fit: cover;" />`:'<i class="fas fa-user" style="font-size: 24px; color: var(--subtext-color);"></i>'}\n              ${0!==parseInt(e)?`<button data-delete-avatar-id="${e}" style="\n                position: absolute;\n                top: 4px;\n                right: 4px;\n                width: 24px;\n                height: 24px;\n                background: rgba(0,0,0,0.7);\n                color: var(--red);\n                border: none;\n                border-radius: 50%;\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 12px;\n                opacity: 0;\n                transition: opacity 0.2s;\n              " onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0'">×</button>`:''}\n            </div>\n          `).join('')}\n        </div>\n        \n        <div style="border-top: 1px solid var(--border-color); padding-top: 16px; margin-top: 16px;">\n          <h4 style="margin: 0 0 12px 0; font-size: 14px; color: var(--subtext-color);">添加新头像</h4>\n          <button id="btn-add-avatar" style="\n            width: 100%;\n            padding: 12px;\n            background: var(--blue);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: bold;\n          ">添加头像</button>\n        </div>\n        \n        <button id="btn-cancel" style="\n          width: 100%;\n          padding: 10px;\n          margin-top: 16px;\n          background: transparent;\n          color: var(--subtext-color, #a6adc8);\n          border: none;\n          cursor: pointer;\n        ">取消</button>\n      </div>\n    </div>\n  `,document.body.appendChild(e),a=e,Object.entries(l).forEach(([n])=>{const l=e.querySelector(`[data-avatar-id="${n}"]`);l?.addEventListener('click',()=>{a===e&&(document.body.removeChild(e),a=null),t=!1,h(parseInt(n))})}),Object.entries(l).forEach(([l])=>{if(0!==parseInt(l)){const o=e.querySelector(`[data-delete-avatar-id="${l}"]`);o?.addEventListener('click',async e=>{e.stopPropagation(),await async function(e){if(!r.value)return;const l=p(n.characterName),o=l[e];if(!o)return;const c=document.createElement('div');c.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">确认删除</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">确定要删除这张头像吗？此操作无法撤销。</p>\n        <div style="display: flex; gap: 12px;">\n          <button id="btn-confirm" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--red, #f38ba8);\n            color: #1e1e2e;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: bold;\n          ">删除</button>\n          <button id="btn-cancel" style="\n            flex: 1;\n            padding: 12px;\n            background: transparent;\n            color: var(--subtext-color, #a6adc8);\n            border: 1px solid var(--border-color, #45475a);\n            border-radius: 8px;\n            cursor: pointer;\n          ">取消</button>\n        </div>\n      </div>\n    </div>\n  ',document.body.appendChild(c),c.querySelector('#btn-confirm')?.addEventListener('click',async()=>{if(document.body.removeChild(c),a&&(document.body.removeChild(a),a=null),t=!1,await async function(e,t){s[e]&&void 0!==s[e][t]&&(delete s[e][t],await m())}(n.characterName,e),i.value===e&&h(0),r.value?.Avatar?.history){const t=r.value.Avatar.history.filter(t=>t!==e);r.value.Avatar.history=t}console.log('已删除头像:',n.characterName,e),E()}),c.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(c)}),c.firstElementChild?.addEventListener('click',e=>{e.target===c.firstElementChild&&document.body.removeChild(c)})}(parseInt(l))})}}),e.querySelector('#btn-cancel')?.addEventListener('click',()=>{a===e&&(document.body.removeChild(e),a=null),t=!1}),e.querySelector('#btn-add-avatar')?.addEventListener('click',()=>{a===e&&(document.body.removeChild(e),a=null),t=!1,function(){const e=document.createElement('div');e.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">添加头像</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">请选择添加方式：</p>\n        <div style="display: flex; flex-direction: column; gap: 12px;">\n          <button id="btn-use-url" style="\n            padding: 14px;\n            background: var(--blue);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 15px;\n            font-weight: bold;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n          ">\n            <i class="fas fa-link"></i>\n            使用链接\n          </button>\n          <button id="btn-use-file" style="\n            padding: 14px;\n            background: var(--green);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 15px;\n            font-weight: bold;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n          ">\n            <i class="fas fa-folder-open"></i>\n            选择本地文件\n          </button>\n        </div>\n        <button id="btn-cancel" style="\n          width: 100%;\n          padding: 10px;\n          margin-top: 16px;\n          background: transparent;\n          color: var(--subtext-color, #a6adc8);\n          border: none;\n          cursor: pointer;\n        ">取消</button>\n      </div>\n    </div>\n  ',document.body.appendChild(e),e.querySelector('#btn-use-url')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,function(){const e=document.createElement('div');e.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">输入图片链接</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">请输入图片的URL地址：</p>\n        <input type="text" id="avatar-url-input" placeholder="https://example.com/avatar.jpg" style="\n          width: 100%;\n          padding: 12px;\n          background: var(--input-bg-color, #313244);\n          border: 1px solid var(--border-color, #45475a);\n          border-radius: 6px;\n          color: var(--text-color, #cdd6f4);\n          font-size: 14px;\n          margin-bottom: 16px;\n          box-sizing: border-box;\n        " />\n        <div style="display: flex; gap: 12px;">\n          <button id="btn-confirm" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--blue);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: bold;\n          ">确认</button>\n          <button id="btn-cancel" style="\n            flex: 1;\n            padding: 12px;\n            background: transparent;\n            color: var(--subtext-color, #a6adc8);\n            border: 1px solid var(--border-color, #45475a);\n            border-radius: 8px;\n            cursor: pointer;\n          ">取消</button>\n        </div>\n      </div>\n    </div>\n  ',document.body.appendChild(e),e.querySelector('#btn-confirm')?.addEventListener('click',()=>{const t=e.querySelector('#avatar-url-input').value.trim();t&&(document.body.removeChild(e),a=null,V(t))}),e.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,t=!1,E()}),e.firstElementChild?.addEventListener('click',n=>{n.target===e.firstElementChild&&(document.body.removeChild(e),a=null,t=!1,E())})}()}),e.querySelector('#btn-use-file')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,N()}),e.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,t=!1,E()}),e.firstElementChild?.addEventListener('click',n=>{n.target===e.firstElementChild&&(document.body.removeChild(e),a=null,t=!1,E())})}()}),e.firstElementChild?.addEventListener('click',n=>{n.target===e.firstElementChild&&(a===e&&(document.body.removeChild(e),a=null),t=!1)})}function h(e){if(!r.value)return;l.data.角色列表||(l.data.角色列表={}),l.data.角色列表[n.characterName]||(l.data.角色列表[n.characterName]={});const t=l.data.角色列表[n.characterName];t.Avatar||(t.Avatar={current:0,history:[]});const a=t.Avatar.current||0,o=t.Avatar.history||[];console.log('当前头像编号:',a),console.log('历史头像编号:',o),console.log('新头像编号:',e);let c=[...o];0===a||a===e||c.includes(a)||(c=[a,...c].slice(0,10)),0===e||c.includes(e)||(c=[e,...c].slice(0,10)),t.Avatar.current=e,t.Avatar.history=c,console.log('头像已更新:',n.characterName,e),console.log('更新后的Avatar:',t.Avatar)}function N(){const e=document.createElement('div');e.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">选择本地文件上传方式</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">请选择如何上传本地图片：</p>\n        \n        <div style="border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; margin-bottom: 16px; background-color: var(--surface-color, #313244);">\n          <h4 style="margin: 0 0 12px 0; font-size: 14px; color: var(--text-color);">上传方式说明</h4>\n          <div style="display: flex; flex-direction: column; gap: 12px;">\n            <div>\n              <h5 style="margin: 0 0 6px 0; font-size: 13px; color: var(--blue);">1. 绝对路径方式</h5>\n              <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: var(--subtext-color);">\n                <li style="margin-bottom: 4px;"><span style="color: var(--green);">优势：</span>不占用世界书存储空间，文件大小无限制</li>\n                <li style="margin-bottom: 4px;"><span style="color: var(--red);">劣势：</span>文件移动或删除后头像失效，路径格式依赖操作系统</li>\n              </ul>\n            </div>\n            <div>\n              <h5 style="margin: 0 0 6px 0; font-size: 13px; color: var(--green);">2. Base64方式</h5>\n              <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: var(--subtext-color);">\n                <li style="margin-bottom: 4px;"><span style="color: var(--green);">优势：</span>不依赖本地文件系统，可靠性高</li>\n                <li style="margin-bottom: 4px;"><span style="color: var(--red);">劣势：</span>增加世界书大小，文件大小限制为2MB</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div style="display: flex; flex-direction: column; gap: 12px;">\n          <button id="btn-use-absolute-path" style="\n            padding: 14px;\n            background: var(--blue);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 15px;\n            font-weight: bold;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n          ">\n            <i class="fas fa-file-path"></i>\n            使用绝对路径\n          </button>\n          <button id="btn-use-file-select" style="\n            padding: 14px;\n            background: var(--green);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 15px;\n            font-weight: bold;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n          ">\n            <i class="fas fa-folder-open"></i>\n            选择文件并转换为Base64\n          </button>\n        </div>\n        \n        <button id="btn-cancel" style="\n          width: 100%;\n          padding: 10px;\n          margin-top: 16px;\n          background: transparent;\n          color: var(--subtext-color, #a6adc8);\n          border: none;\n          cursor: pointer;\n        ">取消</button>\n      </div>\n    </div>\n  ',document.body.appendChild(e),e.querySelector('#btn-use-absolute-path')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,function(){const e=document.createElement('div');e.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">输入文件绝对路径</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">请输入本地图片文件的绝对路径：</p>\n        <input type="text" id="avatar-path-input" placeholder="例如：C:\\Users\\Username\\Pictures\\avatar.jpg" style="\n          width: 100%;\n          padding: 12px;\n          background: var(--input-bg-color, #313244);\n          border: 1px solid var(--border-color, #45475a);\n          border-radius: 6px;\n          color: var(--text-color, #cdd6f4);\n          font-size: 14px;\n          margin-bottom: 16px;\n          box-sizing: border-box;\n        " />\n        <div style="display: flex; gap: 12px;">\n          <button id="btn-confirm" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--blue);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: bold;\n          ">确认</button>\n          <button id="btn-cancel" style="\n            flex: 1;\n            padding: 12px;\n            background: transparent;\n            color: var(--subtext-color, #a6adc8);\n            border: 1px solid var(--border-color, #45475a);\n            border-radius: 8px;\n            cursor: pointer;\n          ">取消</button>\n        </div>\n      </div>\n    </div>\n  ',document.body.appendChild(e),e.querySelector('#btn-confirm')?.addEventListener('click',()=>{const o=e.querySelector('#avatar-path-input').value.trim();o?function(e){const t=['.jpg','.jpeg','.png','.gif','.webp','.bmp'].some(t=>e.toLowerCase().endsWith(t)),a=/^[a-zA-Z]:\\(?:[^\\/:*?"<>|]+\\)*[^\\/:*?"<>|]+$/,n=/^\/(?:[^\/:*?"<>|]+\/)*[^\/:*?"<>|]+$/;return t&&(a.test(e)||n.test(e))}(o)?(document.body.removeChild(e),a=null,async function(e){if(!r.value)return;l.data.角色列表||(l.data.角色列表={});l.data.角色列表[n.characterName]||(l.data.角色列表[n.characterName]={});const o=l.data.角色列表[n.characterName];o.Avatar||(o.Avatar={current:0,history:[]});const c=g(n.characterName);let s=e;e.match(/^[a-zA-Z]:\\/)?s='file:///'+e.replace(/\\/g,'/'):e.startsWith('/')&&(s='file://'+e);await b(n.characterName,c,s),console.log('已添加新头像:',n.characterName,c,s),h(c),t=!1,a=null,E()}(o)):alert('请输入有效的文件路径'):alert('请输入文件路径')}),e.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,N()}),e.firstElementChild?.addEventListener('click',t=>{t.target===e.firstElementChild&&(document.body.removeChild(e),a=null,N())})}()}),e.querySelector('#btn-use-file-select')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,function(){const e=document.createElement('input');e.type='file',e.accept='image/*',e.style.display='none',e.addEventListener('change',async n=>{const l=n.target,r=l.files?.[0];if(r){const n=2097152;if(r.size>n)return alert('图片文件过大，请选择小于 2MB 的图片'),document.body.removeChild(e),void(a=null);const l=new FileReader;l.onload=async e=>{const t=e.target?.result;t&&(a=null,await V(t))},l.onerror=()=>{alert('读取图片文件失败'),document.body.removeChild(e),a=null,t=!1,E()},l.readAsDataURL(r)}else document.body.removeChild(e),a=null;document.body.removeChild(e)}),document.body.appendChild(e),e.click()}()}),e.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(e),a=null,t=!1,E()}),e.firstElementChild?.addEventListener('click',n=>{n.target===e.firstElementChild&&(document.body.removeChild(e),a=null,t=!1,E())})}async function V(e){if(!r.value)return;l.data.角色列表||(l.data.角色列表={}),l.data.角色列表[n.characterName]||(l.data.角色列表[n.characterName]={});const o=l.data.角色列表[n.characterName];o.Avatar||(o.Avatar={current:0,history:[]});const c=g(n.characterName);await b(n.characterName,c,e),console.log('已添加新头像:',n.characterName,c,e),h(c),t=!1,a=null,E()}return(t,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Y,[r.value||c.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',te,[(0,o.createCommentVNode)(' 角色头像区域 '),(0,o.createElementVNode)('div',ae,[(0,o.createElementVNode)('div',ne,[d.value?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:d.value,alt:e.characterName,class:'character-avatar-img',onError:y},null,40,le)):((0,o.openBlock)(),(0,o.createElementBlock)('div',re,[...a[1]||(a[1]=[(0,o.createElementVNode)('i',{class:'fas fa-user'},null,-1)])]))]),(0,o.createCommentVNode)(' 底部内容层 '),(0,o.createElementVNode)('div',oe,[a[4]||(a[4]=(0,o.createElementVNode)('div',{class:'avatar-text-gradient'},null,-1)),(0,o.createElementVNode)('div',ce,[(0,o.createElementVNode)('div',se,(0,o.toDisplayString)(e.characterName),1),(0,o.createCommentVNode)(' 历史头像 '),f.value.length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',ie,[a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'history-title'},'历史头像',-1)),(0,o.createElementVNode)('div',de,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(f.value,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:(0,o.normalizeClass)(['history-item',{active:e===d.value}]),onClick:t=>function(e){const t=p(n.characterName),a=Object.entries(t).find(([_,t])=>t===e)?.[0];a&&parseInt(a)!==i.value&&h(parseInt(a))}(e)},[(0,o.createElementVNode)('img',{src:e,alt:`历史头像 ${t+1}`,onError:k},null,40,me),(0,o.createElementVNode)('button',{class:'delete-avatar-btn',onClick:(0,o.withModifiers)(e=>function(e,t){if(!r.value?.Avatar)return;const a=document.createElement('div');a.innerHTML='\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 300px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">确认删除</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">确定要删除这张历史头像吗？此操作无法撤销。</p>\n        <div style="display: flex; gap: 12px;">\n          <button id="btn-confirm" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--red, #f38ba8);\n            color: #1e1e2e;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n          ">删除</button>\n          <button id="btn-cancel" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--surface-color, #313244);\n            color: var(--text-color, #cdd6f4);\n            border: 1px solid var(--border-color, #45475a);\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n          ">取消</button>\n        </div>\n      </div>\n    </div>\n  ',document.body.appendChild(a),a.querySelector('#btn-confirm')?.addEventListener('click',()=>{const e=l.data.角色列表?.[n.characterName];if(!e?.Avatar)return;const r=(e.Avatar.history||[]).filter((_,e)=>e!==t);e.Avatar.history=r,document.body.removeChild(a)}),a.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(a)}),a.firstElementChild?.addEventListener('click',e=>{e.target===a.firstElementChild&&document.body.removeChild(a)})}(0,t),['stop']),title:'删除历史头像'},[...a[2]||(a[2]=[(0,o.createElementVNode)('i',{class:'fas fa-times'},null,-1)])],8,pe)],10,ue))),128))])])):(0,o.createCommentVNode)('v-if',!0)])]),(0,o.createElementVNode)('button',{class:'change-avatar-btn',onClick:E,title:'更换头像'},[...a[5]||(a[5]=[(0,o.createElementVNode)('i',{class:'fas fa-camera'},null,-1)])])]),(0,o.createCommentVNode)(' 角色基本信息 '),(0,o.createElementVNode)('div',ve,[(0,o.createElementVNode)('div',be,[(0,o.createElementVNode)('div',ge,[a[6]||(a[6]=(0,o.createElementVNode)('i',{class:'fas fa-heartbeat'},null,-1)),a[7]||(a[7]=(0,o.createElementVNode)('strong',null,'状态：',-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(c.value?.State||'未知'),1)]),(0,o.createElementVNode)('div',fe,[a[8]||(a[8]=(0,o.createElementVNode)('i',{class:'fas fa-running'},null,-1)),a[9]||(a[9]=(0,o.createElementVNode)('strong',null,'行动：',-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(c.value?.Action||'未知'),1)]),(0,o.createElementVNode)('div',ye,[a[10]||(a[10]=(0,o.createElementVNode)('i',{class:'fas fa-shield-alt'},null,-1)),a[11]||(a[11]=(0,o.createElementVNode)('strong',null,'变身：',-1)),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(c.value?.isTransformed?'status-highlight-yes':'status-highlight-no')},(0,o.toDisplayString)(c.value?.isTransformed?'是':'否'),3)]),(0,o.createCommentVNode)(' 角色属性 '),r.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',ke,[(0,o.createElementVNode)('div',Ee,[a[12]||(a[12]=(0,o.createElementVNode)('span',{class:'stat-bar-title','data-tooltip':'影响技能效果与消耗'},[(0,o.createElementVNode)('i',{class:'fas fa-bolt',style:{color:'var(--green)'}}),(0,o.createTextVNode)('魔力 ')],-1)),(0,o.createElementVNode)('span',he,(0,o.toDisplayString)(r.value.Magic||0)+'/'+(0,o.toDisplayString)(r.value.MagicMax||100),1)]),(0,o.createElementVNode)('div',Ne,[(0,o.createElementVNode)('div',{class:'progress-bar-fill magic-bar',style:(0,o.normalizeStyle)({width:`${Math.min((r.value.Magic||0)/(r.value.MagicMax||100)*100,100)}%`})},null,4)])])):(0,o.createCommentVNode)('v-if',!0),r.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ve,[(0,o.createElementVNode)('div',xe,[a[13]||(a[13]=(0,o.createElementVNode)('span',{class:'stat-bar-title','data-tooltip':'影响角色间的互动与情感'},[(0,o.createElementVNode)('i',{class:'fas fa-heart',style:{color:'var(--pink)'}}),(0,o.createTextVNode)('好感度 ')],-1)),(0,o.createElementVNode)('span',Ce,(0,o.toDisplayString)(r.value.Favor||0)+'%',1)]),(0,o.createElementVNode)('div',Be,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['progress-bar-fill',(r.value.Favor||0)>=0?'favor-bar-positive':'favor-bar-negative']),style:(0,o.normalizeStyle)({width:`${Math.abs(r.value.Favor||0)}%`})},null,6)])])):(0,o.createCommentVNode)('v-if',!0),r.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',we,[(0,o.createElementVNode)('div',Se,[a[14]||(a[14]=(0,o.createElementVNode)('span',{class:'stat-bar-title','data-tooltip':'影响心智与能力，过高可能导致失控'},[(0,o.createElementVNode)('i',{class:'fas fa-skull-crossbones',style:{color:'var(--purple)'}}),(0,o.createTextVNode)('堕落值 ')],-1)),(0,o.createElementVNode)('span',ze,(0,o.toDisplayString)(r.value.Corruption||0)+'%',1)]),(0,o.createElementVNode)('div',Me,[(0,o.createElementVNode)('div',{class:'progress-bar-fill corruption-bar',style:(0,o.normalizeStyle)({width:`${r.value.Corruption||0}%`})},null,4)])])):(0,o.createCommentVNode)('v-if',!0),c.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',je,[(0,o.createElementVNode)('div',De,[a[15]||(a[15]=(0,o.createElementVNode)('span',{class:'stat-bar-title','data-tooltip':'影响角色的行为与理智'},[(0,o.createElementVNode)('i',{class:'fas fa-fire',style:{color:'var(--red)'}}),(0,o.createTextVNode)('情欲值 ')],-1)),(0,o.createElementVNode)('span',Te,(0,o.toDisplayString)(c.value.Lust||0)+'%',1)]),(0,o.createElementVNode)('div',Le,[(0,o.createElementVNode)('div',{class:'progress-bar-fill lust-bar',style:(0,o.normalizeStyle)({width:`${c.value.Lust||0}%`})},null,4)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 角色心理活动 '),c.value?.Thought?((0,o.openBlock)(),(0,o.createElementBlock)('div',_e,[a[16]||(a[16]=(0,o.createElementVNode)('div',{class:'thought-title'},[(0,o.createElementVNode)('i',{class:'fas fa-comment-dots'}),(0,o.createTextVNode)('心理活动')],-1)),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)(c.value.Thought),1)])):(0,o.createCommentVNode)('v-if',!0)])]),(0,o.createCommentVNode)(' 角色介绍 '),r.value?.Description&&r.value.Description.length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ae,[a[17]||(a[17]=(0,o.createElementVNode)('div',{class:'description-title'},[(0,o.createElementVNode)('i',{class:'fas fa-info-circle'}),(0,o.createTextVNode)('角色介绍')],-1)),(0,o.createElementVNode)('div',$e,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.value.Description,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'description-item'},(0,o.toDisplayString)(e),1))),128))])])):(0,o.createCommentVNode)('v-if',!0)])):((0,o.openBlock)(),(0,o.createElementBlock)('div',ee,[...a[0]||(a[0]=[(0,o.createElementVNode)('span',null,'加载角色信息中...',-1)])]))]))}}),Pe=(0,Q.A)(Oe,[['__scopeId','data-v-0667003e']]),qe={class:'characters-panel'},Ie={key:0,class:'empty-state'},Fe={key:1,class:'characters-list'},He=['onClick'],Ue={class:'char-name-left'},We=['src'],Re={key:1,class:'char-avatar-placeholder'},Ge={class:'char-name-text'},Ze={key:0,class:'character-detail'},Je={class:'char-details'},Ke={class:'detail-item'},Qe={class:'detail-item'},Xe={class:'detail-item'},Ye={key:0,class:'stat-bar-container'},et={class:'stat-bar-label'},tt={class:'stat-bar-value'},at={class:'progress-bar'},nt={key:1,class:'stat-bar-container'},lt={class:'stat-bar-label'},rt={class:'stat-bar-value'},ot={class:'progress-bar'},ct={key:2,class:'stat-bar-container'},st={class:'stat-bar-label'},it={class:'stat-bar-value'},dt={class:'progress-bar'},ut={class:'stat-bar-container'},mt={class:'stat-bar-label'},pt={class:'stat-bar-value'},vt={class:'progress-bar'},bt={key:3,class:'thought-block'},gt=(0,o.defineComponent)({__name:'CharactersPanel',setup(e){const t=j(),a=(0,o.computed)(()=>t.data.在场角色||{}),n=(0,o.computed)(()=>t.data.角色列表||{}),l=(0,o.ref)({});return(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',qe,[t[14]||(t[14]=(0,o.createElementVNode)('h3',{class:'panel-title'},'在场角色',-1)),0===Object.keys(a.value).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ie,[...t[0]||(t[0]=[(0,o.createElementVNode)('p',null,'当前没有在场角色',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Fe,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.value,(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:'char-card'},[(0,o.createElementVNode)('div',{class:'char-name',onClick:e=>function(e){l.value[e]=!l.value[e]}(a)},[(0,o.createElementVNode)('div',Ue,[n.value[a]&&(0,o.unref)(v)(a,n.value[a]?.Avatar?.current||0)?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:(0,o.unref)(v)(a,n.value[a]?.Avatar?.current||0),class:'char-avatar',alt:'头像'},null,8,We)):((0,o.openBlock)(),(0,o.createElementBlock)('div',Re,[...t[1]||(t[1]=[(0,o.createElementVNode)('i',{class:'fas fa-user'},null,-1)])])),(0,o.createElementVNode)('span',Ge,(0,o.toDisplayString)(a),1)]),((0,o.openBlock)(),(0,o.createElementBlock)('svg',{class:(0,o.normalizeClass)(['collapse-icon',{rotated:l.value[a]}]),viewBox:'0 0 320 512',fill:'currentColor',xmlns:'http://www.w3.org/2000/svg'},[...t[2]||(t[2]=[(0,o.createElementVNode)('path',{d:'M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4 9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z'},null,-1)])],2))],8,He),(0,o.createCommentVNode)(' 展开的角色详情 '),l.value[a]?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ze,[(0,o.createElementVNode)('div',Je,[(0,o.createElementVNode)('div',Ke,[t[3]||(t[3]=(0,o.createElementVNode)('i',{class:'fas fa-heartbeat'},null,-1)),t[4]||(t[4]=(0,o.createElementVNode)('strong',null,'状态：',-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.State||'未知'),1)]),(0,o.createElementVNode)('div',Qe,[t[5]||(t[5]=(0,o.createElementVNode)('i',{class:'fas fa-running'},null,-1)),t[6]||(t[6]=(0,o.createElementVNode)('strong',null,'行动：',-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.Action||'未知'),1)]),(0,o.createElementVNode)('div',Xe,[t[7]||(t[7]=(0,o.createElementVNode)('i',{class:'fas fa-shield-alt'},null,-1)),t[8]||(t[8]=(0,o.createElementVNode)('strong',null,'变身：',-1)),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(e.isTransformed?'status-highlight-yes':'status-highlight-no')},(0,o.toDisplayString)(e.isTransformed?'是':'否'),3)]),(0,o.createCommentVNode)(' 角色属性 '),n.value[a]?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ye,[(0,o.createElementVNode)('div',et,[t[9]||(t[9]=(0,o.createElementVNode)('span',{class:'stat-bar-title'},[(0,o.createElementVNode)('i',{class:'fas fa-bolt',style:{color:'var(--green)'}}),(0,o.createTextVNode)('魔力 ')],-1)),(0,o.createElementVNode)('span',tt,(0,o.toDisplayString)(n.value[a].Magic||0)+'/'+(0,o.toDisplayString)(n.value[a].MagicMax||100),1)]),(0,o.createElementVNode)('div',at,[(0,o.createElementVNode)('div',{class:'progress-bar-fill magic-bar',style:(0,o.normalizeStyle)({width:`${Math.min((n.value[a].Magic||0)/(n.value[a].MagicMax||100)*100,100)}%`})},null,4)])])):(0,o.createCommentVNode)('v-if',!0),n.value[a]?((0,o.openBlock)(),(0,o.createElementBlock)('div',nt,[(0,o.createElementVNode)('div',lt,[t[10]||(t[10]=(0,o.createElementVNode)('span',{class:'stat-bar-title'},[(0,o.createElementVNode)('i',{class:'fas fa-heart',style:{color:'var(--pink)'}}),(0,o.createTextVNode)('好感度 ')],-1)),(0,o.createElementVNode)('span',rt,(0,o.toDisplayString)(n.value[a].Favor||0)+'%',1)]),(0,o.createElementVNode)('div',ot,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['progress-bar-fill',(n.value[a].Favor||0)>=0?'favor-bar-positive':'favor-bar-negative']),style:(0,o.normalizeStyle)({width:`${Math.abs(n.value[a].Favor||0)}%`})},null,6)])])):(0,o.createCommentVNode)('v-if',!0),n.value[a]?((0,o.openBlock)(),(0,o.createElementBlock)('div',ct,[(0,o.createElementVNode)('div',st,[t[11]||(t[11]=(0,o.createElementVNode)('span',{class:'stat-bar-title'},[(0,o.createElementVNode)('i',{class:'fas fa-skull-crossbones',style:{color:'var(--purple)'}}),(0,o.createTextVNode)('堕落值 ')],-1)),(0,o.createElementVNode)('span',it,(0,o.toDisplayString)(n.value[a].Corruption||0)+'%',1)]),(0,o.createElementVNode)('div',dt,[(0,o.createElementVNode)('div',{class:'progress-bar-fill corruption-bar',style:(0,o.normalizeStyle)({width:`${n.value[a].Corruption||0}%`})},null,4)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',ut,[(0,o.createElementVNode)('div',mt,[t[12]||(t[12]=(0,o.createElementVNode)('span',{class:'stat-bar-title'},[(0,o.createElementVNode)('i',{class:'fas fa-fire',style:{color:'var(--red)'}}),(0,o.createTextVNode)('情欲值 ')],-1)),(0,o.createElementVNode)('span',pt,(0,o.toDisplayString)(e.Lust||0)+'%',1)]),(0,o.createElementVNode)('div',vt,[(0,o.createElementVNode)('div',{class:'progress-bar-fill lust-bar',style:(0,o.normalizeStyle)({width:`${e.Lust||0}%`})},null,4)])]),(0,o.createCommentVNode)(' 角色心理活动 '),e.Thought?((0,o.openBlock)(),(0,o.createElementBlock)('div',bt,[t[13]||(t[13]=(0,o.createElementVNode)('div',{class:'thought-title'},[(0,o.createElementVNode)('i',{class:'fas fa-comment-dots'}),(0,o.createTextVNode)('心理活动')],-1)),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)(e.Thought),1)])):(0,o.createCommentVNode)('v-if',!0)])])):(0,o.createCommentVNode)('v-if',!0)]))),128))]))]))}}),ft=(0,Q.A)(gt,[['__scopeId','data-v-1ace19ce']]),yt={class:'skills-panel'},kt={class:'skill-points-display'},Et={class:'points-card'},ht={class:'points-info'},Nt={class:'points-value'},Vt={class:'magic-max-upgrade'},xt={class:'upgrade-header'},Ct={class:'current-magic-max'},Bt={class:'upgrade-controls'},wt={class:'input-group'},St=['max'],zt=['disabled'],Mt={class:'upgrade-info'},jt={class:'upgrade-cost'},Dt={class:'upgrade-result'},Tt={key:0,class:'empty-skills'},Lt={key:1,class:'skills-list'},_t=['data-skill'],At={class:'skill-header'},$t={class:'skill-title'},Ot={key:0,class:'learned-badge'},Pt={class:'skill-name'},qt={class:'skill-cost-badge'},It={class:'skill-description'},Ft=['disabled','onClick'],Ht={key:1,class:'learned-status'},Ut=(0,o.defineComponent)({__name:'SkillsPanel',setup(e){const t=j(),a=(0,o.ref)(1),n=(0,o.computed)(()=>t.data.user||{SkillPoint:0,Magic:0,MagicMax:100,Morality:0,SkillTree:{}}),l=(0,o.computed)(()=>n.value.SkillTree||{}),r=(0,o.computed)(()=>a.value>0&&a.value<=n.value.SkillPoint);function c(e){const t=n.value.SkillPoint||0,a=e?.消耗||0;return!e?.已学习&&t>=a}function s(){const e=n.value.SkillPoint||0,l=n.value.MagicMax||100,r=n.value.Magic||0,o=a.value||0;if(o>0&&o<=e){const c={...n.value,SkillPoint:e-o,MagicMax:l+o,Magic:r+o};t.data.user=c,a.value=1,console.log('魔力值上限已增加:',{原上限:l,增加点数:o,新上限:l+o,原魔力值:r,新魔力值:r+o,剩余侵蚀点:e-o})}}return(e,i)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',yt,[i[7]||(i[7]=(0,o.createElementVNode)('h3',{class:'panel-title'},'学习技能',-1)),(0,o.createElementVNode)('div',kt,[(0,o.createElementVNode)('div',Et,[i[2]||(i[2]=(0,o.createElementVNode)('span',{class:'points-icon'},'⭐',-1)),(0,o.createElementVNode)('div',ht,[(0,o.createElementVNode)('span',Nt,(0,o.toDisplayString)(n.value.SkillPoint),1),i[1]||(i[1]=(0,o.createElementVNode)('span',{class:'points-label'},'可用侵蚀点',-1))])])]),(0,o.createElementVNode)('div',Vt,[(0,o.createElementVNode)('div',xt,[i[3]||(i[3]=(0,o.createElementVNode)('span',{class:'upgrade-title'},'💎 增加魔力值上限',-1)),(0,o.createElementVNode)('span',Ct,'当前上限: '+(0,o.toDisplayString)(n.value.MagicMax),1)]),(0,o.createElementVNode)('div',Bt,[(0,o.createElementVNode)('div',wt,[i[4]||(i[4]=(0,o.createElementVNode)('label',{class:'input-label'},'增加点数:',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{type:'number','onUpdate:modelValue':i[0]||(i[0]=e=>a.value=e),min:'1',max:n.value.SkillPoint,class:'upgrade-input',placeholder:'输入点数'},null,8,St),[[o.vModelText,a.value,void 0,{number:!0}]])]),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['upgrade-button',{disabled:!r.value}]),disabled:!r.value,onClick:s},' 确认增加 ',10,zt)]),(0,o.createElementVNode)('div',Mt,[(0,o.createElementVNode)('span',jt,'消耗: '+(0,o.toDisplayString)(a.value)+' 侵蚀点',1),(0,o.createElementVNode)('span',Dt,'增加后上限: '+(0,o.toDisplayString)(n.value.MagicMax+a.value),1)])]),0===Object.keys(l.value).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Tt,[...i[5]||(i[5]=[(0,o.createElementVNode)('p',null,'暂无可学习的技能',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Lt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.value,(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:(0,o.normalizeClass)(['skill-card',{learned:e.已学习,disabled:!c(e)}]),'data-skill':a},[(0,o.createElementVNode)('div',At,[(0,o.createElementVNode)('div',$t,[e.已学习?((0,o.openBlock)(),(0,o.createElementBlock)('span',Ot,'✓')):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('span',Pt,(0,o.toDisplayString)(a),1)]),(0,o.createElementVNode)('div',qt,'消耗: '+(0,o.toDisplayString)(e.消耗)+' 点',1)]),(0,o.createElementVNode)('p',It,(0,o.toDisplayString)(e.描述),1),e.已学习?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ht,[...i[6]||(i[6]=[(0,o.createElementVNode)('span',{class:'learned-text'},'已学习',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:0,class:(0,o.normalizeClass)(['learn-button',{disabled:!c(e)}]),disabled:!c(e),onClick:l=>function(e,a){const l=n.value.SkillPoint||0,r=n.value.SkillTree||{};if(console.log('学习技能开始:',{skillName:e,cost:a,currentSkillPoints:l}),l>=a&&!r[e]?.已学习){console.log('条件满足，准备学习技能');const o={...r,[e]:{...r[e],已学习:!0}},c=l-a;console.log('新技能点:',c);const s={...n.value,SkillPoint:c,SkillTree:o};t.data.user=s,console.log('dataStore.data已更新:',t.data.user);const i=document.querySelector(`[data-skill="${e}"]`);i&&(i.classList.add('skill-learned-animation'),setTimeout(()=>{i.classList.remove('skill-learned-animation')},1e3)),console.log('学习技能完成')}else console.log('条件不满足:',{技能点足够:l>=a,技能未学习:!r[e]?.已学习})}(a,e.消耗||0)},(0,o.toDisplayString)(c(e)?'学习技能':'点数不足'),11,Ft))],10,_t))),128))]))]))}}),Wt=(0,Q.A)(Ut,[['__scopeId','data-v-b5026c5c']]),Rt={class:'story-panel'},Gt={key:0,class:'empty-state'},Zt={key:1,class:'story-list'},Jt=['onClick'],Kt={class:'story-header'},Qt={class:'story-name'},Xt={class:'story-header-right'},Yt={class:'story-preview'},ea={key:0,class:'endings-preview'},ta={class:'endings-count'},aa={key:0,class:'completed-endings-count'},na={key:1,class:'no-endings-preview'},la=(0,o.defineComponent)({__name:'StoryPanel',setup(e){const t=j(),a=(0,o.computed)(()=>t.data.个人线||{});function n(e){return!(!e||!e.结局)&&Object.values(e.结局).some(e=>!(!e||!e.达成条件)&&Object.values(e.达成条件).every(e=>!0===e))}function l(e){return e&&e.结局?Object.values(e.结局).filter(e=>!(!e||!e.达成条件)&&Object.values(e.达成条件).every(e=>!0===e)).length:0}function r(e){if(!e)return'未知';const t=Object.entries(e.结局||{}).filter(([_,e])=>!(!e||!e.达成条件)&&Object.values(e.达成条件).every(e=>!0===e));if(t.length>0){return`已完成: ${t.map(([e])=>e).join('、')}`}return e.状态||'未开始'}function c(e){return n(e)?'status-ending-completed':function(e){switch(e){case'未开始':return'status-not-started';case'进行中':return'status-in-progress';case'已完成':return'status-completed';default:return'status-unknown'}}(e.状态||'未开始')}return(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Rt,[t[3]||(t[3]=(0,o.createElementVNode)('h3',{class:'panel-title'},'个人线',-1)),0===Object.keys(a.value).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Gt,[...t[0]||(t[0]=[(0,o.createElementVNode)('p',null,'暂无个人线',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Zt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.value,(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:(0,o.normalizeClass)(['story-card',{completed:'已完成'===e.状态,'in-progress':'进行中'===e.状态,'ending-completed':n(e)}]),onClick:e=>function(e){const t=new CustomEvent('navigate',{detail:{page:'story-detail',storyName:e}});window.dispatchEvent(t)}(a)},[(0,o.createElementVNode)('div',Kt,[(0,o.createElementVNode)('span',Qt,(0,o.toDisplayString)(a),1),(0,o.createElementVNode)('div',Xt,[(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['story-status',c(e)])},(0,o.toDisplayString)(r(e)),3),t[1]||(t[1]=(0,o.createElementVNode)('i',{class:'fas fa-arrow-right'},null,-1))])]),(0,o.createElementVNode)('div',Yt,[Object.keys(e.结局).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',ea,[(0,o.createElementVNode)('span',ta,(0,o.toDisplayString)(Object.keys(e.结局).length)+' 个结局',1),l(e)>0?((0,o.openBlock)(),(0,o.createElementBlock)('span',aa,' ('+(0,o.toDisplayString)(l(e))+' 个已完成) ',1)):(0,o.createCommentVNode)('v-if',!0)])):((0,o.openBlock)(),(0,o.createElementBlock)('div',na,[...t[2]||(t[2]=[(0,o.createElementVNode)('span',null,'暂未达成任何结局',-1)])]))])],10,Jt))),128))]))]))}}),ra=(0,Q.A)(la,[['__scopeId','data-v-bb48bf38']]),oa={id:'status-container',class:'status-panel-container'},ca={key:0,id:'main-menu-page'},sa={class:'scene-info'},ia={class:'info-line'},da={class:'info-line'},ua={class:'info-line'},ma={class:'menu-buttons'},pa={key:1,id:'archive-page',class:'page-view'},va={key:2,id:'terminal-page',class:'page-view'},ba={class:'user-stats-section'},ga={class:'stats-grid'},fa={class:'stat-card'},ya={class:'stat-info'},ka={class:'stat-value'},Ea={class:'stat-card'},ha={class:'stat-info'},Na={class:'stat-value'},Va={class:'stat-card'},xa={class:'stat-info'},Ca={class:'skills-section'},Ba={class:'skill-cards'},wa={class:'skill-card-text'},Sa={class:'skill-card-count'},za={key:3,id:'skill-list-page',class:'page-view'},Ma={class:'block-title'},ja={width:'24',height:'24',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round',style:{'margin-right':'8px'}},Da={class:'skill-list-content'},Ta={key:0,class:'empty-state'},La={key:1,class:'learned-skills-list'},_a={class:'skill-item-header'},Aa={class:'skill-name'},$a={class:'skill-description'},Oa={key:4,id:'learn-skills-page',class:'page-view'},Pa={class:'learn-skills-content'},qa={key:5,id:'characters-page',class:'page-view'},Ia={key:6,id:'user-page',class:'page-view'},Fa={key:7,id:'story-page',class:'page-view'},Ha={key:8,id:'story-detail-page',class:'page-view'},Ua={class:'block-title'},Wa={class:'story-detail-content'},Ra={key:0,class:'loading'},Ga={key:1,class:'story-detail-card'},Za={class:'story-status'},Ja={key:0,class:'endings-section'},Ka={class:'endings-list'},Qa={class:'ending-header'},Xa={key:0,class:'ending-completed-badge'},Ya={key:0,class:'ending-description'},en={class:'description-content'},tn={key:1,class:'ending-conditions'},an={class:'conditions-list'},nn=['onClick'],ln={class:'condition-name'},rn={class:'condition-status'},on={key:1,class:'no-endings'},cn={key:9,id:'character-detail-page',class:'page-view'},sn={class:'block-title'},dn=(0,o.defineComponent)({__name:'App',setup(e){const t=j(),a=(0,o.ref)('main'),n=(0,o.ref)(''),l=(0,o.ref)(''),r=(0,o.ref)('main');function c(e,t){'character-detail'===e&&(r.value=a.value),a.value=e,t&&('character-detail'===e?n.value=t:'story-detail'===e&&(l.value=t))}const s=(0,o.computed)(()=>t.data.个人线?.[l.value]);function i(e){if(!e||!e.达成条件)return!1;const t=e.达成条件;return Object.values(t).every(e=>!0===e)}const d=(0,o.computed)(()=>{if(!s.value)return'未知';const e=Object.entries(s.value.结局||{}).filter(([_,e])=>i(e));if(e.length>0){return`已完成: ${e.map(([e])=>e).join('、')}`}return s.value.状态||'未开始'}),u=(0,o.computed)(()=>t.data.user||{SkillPoint:0,Magic:0,MagicMax:100,Morality:0,SkillTree:{}}),m=(0,o.computed)(()=>{const e=u.value.SkillTree||{};return Object.keys(e).filter(t=>e[t].已学习)});function p(){if(!s.value)return'status-unknown';return Object.entries(s.value.结局||{}).some(([_,e])=>i(e))?'status-ending-completed':function(e){switch(e){case'未开始':return'status-not-started';case'进行中':return'status-in-progress';case'已完成':return'status-completed';default:return'status-unknown'}}(s.value.状态||'未开始')}function v(){const e='dark'===document.body.getAttribute('data-theme')?'light':'dark';document.body.setAttribute('data-theme',e),localStorage.setItem('theme',e)}function b(e){const{page:t,charName:a,storyName:n}=e.detail;c(t,a||n)}return(0,o.onMounted)(()=>{const e=localStorage.getItem('theme')||'dark';document.body.setAttribute('data-theme',e),window.addEventListener('navigate',b)}),(0,o.onUnmounted)(()=>{window.removeEventListener('navigate',b)}),(e,b)=>{const g=(0,o.resolveComponent)('UserPanel');return(0,o.openBlock)(),(0,o.createElementBlock)('div',oa,[(0,o.createCommentVNode)(' 主题切换按钮 '),(0,o.createElementVNode)('button',{id:'theme-toggle-btn',title:'切换主题',onClick:v},[...b[16]||(b[16]=[(0,o.createElementVNode)('i',{class:'fas fa-sun'},null,-1),(0,o.createElementVNode)('i',{class:'fas fa-moon'},null,-1)])]),(0,o.createCommentVNode)(' 主菜单页面 '),'main'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',ca,[(0,o.createElementVNode)('section',sa,[(0,o.createElementVNode)('div',ia,[b[17]||(b[17]=(0,o.createElementVNode)('i',{class:'fas fa-calendar'},null,-1)),b[18]||(b[18]=(0,o.createElementVNode)('strong',null,'日期：',-1)),(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(t).data.当前时间?(0,o.unref)(t).data.当前时间.split(' ')[0]:'未知'),1)]),(0,o.createElementVNode)('div',da,[b[19]||(b[19]=(0,o.createElementVNode)('i',{class:'fas fa-clock'},null,-1)),b[20]||(b[20]=(0,o.createElementVNode)('strong',null,'时间：',-1)),(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(t).data.当前时间?(0,o.unref)(t).data.当前时间.split(' ')[1]:'未知'),1)]),(0,o.createElementVNode)('div',ua,[b[21]||(b[21]=(0,o.createElementVNode)('i',{class:'fas fa-map-marker-alt'},null,-1)),b[22]||(b[22]=(0,o.createElementVNode)('strong',null,'地点：',-1)),(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(t).data.location||'未知'),1)])]),b[27]||(b[27]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-bars'}),(0,o.createTextVNode)('主菜单')],-1)),(0,o.createElementVNode)('div',ma,[(0,o.createElementVNode)('button',{class:'menu-btn',onClick:b[0]||(b[0]=e=>c('characters'))},[...b[23]||(b[23]=[(0,o.createElementVNode)('i',{class:'fas fa-users'},null,-1),(0,o.createTextVNode)(' 在场角色',-1)])]),(0,o.createElementVNode)('button',{class:'menu-btn',onClick:b[1]||(b[1]=e=>c('archive'))},[...b[24]||(b[24]=[(0,o.createElementVNode)('i',{class:'fas fa-address-book'},null,-1),(0,o.createTextVNode)(' 角色档案',-1)])]),(0,o.createElementVNode)('button',{class:'menu-btn',onClick:b[2]||(b[2]=e=>c('terminal'))},[...b[25]||(b[25]=[(0,o.createElementVNode)('i',{class:'fas fa-laptop-code'},null,-1),(0,o.createTextVNode)(' 我的终端',-1)])]),(0,o.createElementVNode)('button',{class:'menu-btn',onClick:b[3]||(b[3]=e=>c('story'))},[...b[26]||(b[26]=[(0,o.createElementVNode)('i',{class:'fas fa-book'},null,-1),(0,o.createTextVNode)(' 个人线',-1)])])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 角色档案页面 '),'archive'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',pa,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[4]||(b[4]=e=>c('main'))},[...b[28]||(b[28]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[29]||(b[29]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-address-book'}),(0,o.createTextVNode)(' 角色档案')],-1)),(0,o.createVNode)(X,{onViewCharacter:b[5]||(b[5]=e=>c('character-detail',e))})])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 我的终端页面 '),'terminal'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',va,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[6]||(b[6]=e=>c('main'))},[...b[30]||(b[30]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[40]||(b[40]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-laptop-code'}),(0,o.createTextVNode)(' 我的终端')],-1)),(0,o.createCommentVNode)(' 个人状态 '),(0,o.createElementVNode)('div',ba,[(0,o.createElementVNode)('div',ga,[(0,o.createElementVNode)('div',fa,[b[32]||(b[32]=(0,o.createElementVNode)('span',{class:'stat-icon'},'⭐',-1)),(0,o.createElementVNode)('div',ya,[(0,o.createElementVNode)('span',ka,(0,o.toDisplayString)(u.value.SkillPoint),1),b[31]||(b[31]=(0,o.createElementVNode)('span',{class:'stat-label'},'侵蚀点',-1))])]),(0,o.createElementVNode)('div',Ea,[b[34]||(b[34]=(0,o.createElementVNode)('span',{class:'stat-icon'},'💎',-1)),(0,o.createElementVNode)('div',ha,[(0,o.createElementVNode)('span',Na,(0,o.toDisplayString)(u.value.Magic)+'/'+(0,o.toDisplayString)(u.value.MagicMax),1),b[33]||(b[33]=(0,o.createElementVNode)('span',{class:'stat-label'},'魔力值',-1))])]),(0,o.createElementVNode)('div',Va,[b[36]||(b[36]=(0,o.createElementVNode)('span',{class:'stat-icon'},'⚖️',-1)),(0,o.createElementVNode)('div',xa,[(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['stat-value',{positive:u.value.Morality>=0,negative:u.value.Morality<0}])},(0,o.toDisplayString)(u.value.Morality>=0?'+':'')+(0,o.toDisplayString)(u.value.Morality),3),b[35]||(b[35]=(0,o.createElementVNode)('span',{class:'stat-label'},'善恶值',-1))])])])]),(0,o.createCommentVNode)(' 技能列表和学习技能入口 '),(0,o.createElementVNode)('div',Ca,[(0,o.createElementVNode)('div',Ba,[(0,o.createElementVNode)('button',{class:'skill-card',onClick:b[7]||(b[7]=e=>c('skillList'))},[b[38]||(b[38]=(0,o.createElementVNode)('div',{class:'skill-card-icon'},[(0,o.createElementVNode)('svg',{width:'48',height:'48',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round'},[(0,o.createElementVNode)('path',{d:'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20'})])],-1)),(0,o.createElementVNode)('div',wa,[b[37]||(b[37]=(0,o.createElementVNode)('div',{class:'skill-card-title'},'技能列表',-1)),(0,o.createElementVNode)('div',Sa,'('+(0,o.toDisplayString)(m.value.length)+')',1)])]),(0,o.createElementVNode)('button',{class:'skill-card',onClick:b[8]||(b[8]=e=>c('learnSkills'))},[...b[39]||(b[39]=[(0,o.createStaticVNode)('<div class="skill-card-icon" data-v-60888edd><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-60888edd><path d="M22 10v6M2 10l10-5 10 5-10 5z" data-v-60888edd></path><path d="M6 12v5c3 3 9 3 12 0v-5" data-v-60888edd></path></svg></div><div class="skill-card-text" data-v-60888edd><div class="skill-card-title" data-v-60888edd>学习技能</div></div>',2)])])])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 技能列表页面 '),'skillList'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',za,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[9]||(b[9]=e=>c('terminal'))},[...b[41]||(b[41]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),(0,o.createElementVNode)('div',Ma,[((0,o.openBlock)(),(0,o.createElementBlock)('svg',ja,[...b[42]||(b[42]=[(0,o.createElementVNode)('path',{d:'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20'},null,-1)])])),b[43]||(b[43]=(0,o.createTextVNode)(' 技能列表 ',-1))]),(0,o.createElementVNode)('div',Da,[0===m.value.length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ta,[...b[44]||(b[44]=[(0,o.createElementVNode)('p',null,'暂未学习任何技能',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',La,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(m.value,e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e,class:'learned-skill-item'},[(0,o.createElementVNode)('div',_a,[b[45]||(b[45]=(0,o.createElementVNode)('div',{class:'skill-check'},[(0,o.createElementVNode)('svg',{width:'20',height:'20',viewBox:'0 0 24 24',fill:'currentColor',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round'},[(0,o.createElementVNode)('polyline',{points:'20 6 9 17 4 12'})])],-1)),(0,o.createElementVNode)('div',Aa,(0,o.toDisplayString)(e),1),b[46]||(b[46]=(0,o.createElementVNode)('div',{class:'skill-status'},'已掌握',-1))]),(0,o.createElementVNode)('div',$a,(0,o.toDisplayString)(u.value.SkillTree[e].描述),1)]))),128))]))])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 学习技能页面 '),'learnSkills'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Oa,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[10]||(b[10]=e=>c('terminal'))},[...b[47]||(b[47]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[48]||(b[48]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-graduation-cap'}),(0,o.createTextVNode)(' 学习技能')],-1)),(0,o.createElementVNode)('div',Pa,[(0,o.createVNode)(Wt)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 在场角色页面 '),'characters'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',qa,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[11]||(b[11]=e=>c('main'))},[...b[49]||(b[49]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[50]||(b[50]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-users'}),(0,o.createTextVNode)(' 在场角色')],-1)),(0,o.createVNode)(ft)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 用户状态页面 '),'user'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ia,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[12]||(b[12]=e=>c('main'))},[...b[51]||(b[51]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[52]||(b[52]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-user'}),(0,o.createTextVNode)(' 用户状态')],-1)),(0,o.createVNode)(g)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 个人线页面 '),'story'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Fa,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[13]||(b[13]=e=>c('main'))},[...b[53]||(b[53]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),b[54]||(b[54]=(0,o.createElementVNode)('div',{class:'block-title'},[(0,o.createElementVNode)('i',{class:'fas fa-book'}),(0,o.createTextVNode)(' 个人线')],-1)),(0,o.createVNode)(ra)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 个人线详情页面 '),'story-detail'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ha,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[14]||(b[14]=e=>c('story'))},[...b[55]||(b[55]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回',-1)])]),(0,o.createElementVNode)('div',Ua,[b[56]||(b[56]=(0,o.createElementVNode)('i',{class:'fas fa-book-open'},null,-1)),(0,o.createTextVNode)(' '+(0,o.toDisplayString)(l.value),1)]),(0,o.createElementVNode)('div',Wa,[s.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ga,[(0,o.createElementVNode)('div',Za,[b[58]||(b[58]=(0,o.createElementVNode)('strong',null,'状态：',-1)),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(p())},(0,o.toDisplayString)(d.value),3)]),Object.keys(s.value.结局).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ja,[b[61]||(b[61]=(0,o.createElementVNode)('div',{class:'endings-title'},'📚 结局',-1)),(0,o.createElementVNode)('div',Ka,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.value.结局,(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:(0,o.normalizeClass)(['ending-item',{'ending-completed':i(e)}])},[(0,o.createElementVNode)('div',Qa,[(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['ending-name',{'ending-name-completed':i(e)}])},(0,o.toDisplayString)(a),3),i(e)?((0,o.openBlock)(),(0,o.createElementBlock)('span',Xa,'✨ 已达成')):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createCommentVNode)(' 结局说明 '),e.说明?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ya,[b[59]||(b[59]=(0,o.createElementVNode)('div',{class:'description-title'},'说明',-1)),(0,o.createElementVNode)('p',en,(0,o.toDisplayString)(e.说明),1)])):(0,o.createCommentVNode)('v-if',!0),Object.keys(e.达成条件).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',tn,[b[60]||(b[60]=(0,o.createElementVNode)('div',{class:'conditions-title'},'达成条件',-1)),(0,o.createElementVNode)('div',an,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.达成条件,(e,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:n,class:(0,o.normalizeClass)(['condition-item',{'condition-met':e}]),onClick:r=>function(e,a,n){if(!s.value||!s.value.结局||!s.value.结局[e])return;const r=n?'取消完成条件':'标记为已完成',o=n?`确定要取消完成条件「${a}」吗？`:`确定要标记条件「${a}」为已完成吗？`,c=document.createElement('div');c.innerHTML=`\n    <div style="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.7);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n    ">\n      <div style="\n        background: var(--card-bg-color, #1e1e2e);\n        border: 1px solid var(--border-color, #45475a);\n        border-radius: 12px;\n        padding: 24px;\n        min-width: 320px;\n        max-width: 90%;\n        color: var(--text-color, #cdd6f4);\n      ">\n        <h3 style="margin: 0 0 16px 0; font-size: 18px;">${r}</h3>\n        <p style="margin: 0 0 20px 0; color: var(--subtext-color, #a6adc8);">${o}</p>\n        <div style="display: flex; gap: 12px;">\n          <button id="btn-confirm" style="\n            flex: 1;\n            padding: 12px;\n            background: ${n?'var(--red, #f38ba8)':'var(--blue, #89b4fa)'};\n            color: #1e1e2e;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n          ">${n?'取消完成':'确认完成'}</button>\n          <button id="btn-cancel" style="\n            flex: 1;\n            padding: 12px;\n            background: var(--surface-color, #313244);\n            color: var(--text-color, #cdd6f4);\n            border: 1px solid var(--border-color, #45475a);\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n          ">取消</button>\n        </div>\n      </div>\n    </div>\n  `,document.body.appendChild(c),c.querySelector('#btn-confirm')?.addEventListener('click',()=>{const r={...s.value,结局:{...s.value.结局,[e]:{...s.value.结局[e],达成条件:{...s.value.结局[e].达成条件,[a]:!n}}}};t.data.个人线={...t.data.个人线,[l.value]:r},console.log('条件状态已更新:',{结局:e,条件:a,新状态:!n}),document.body.removeChild(c)}),c.querySelector('#btn-cancel')?.addEventListener('click',()=>{document.body.removeChild(c)}),c.firstElementChild?.addEventListener('click',e=>{e.target===c.firstElementChild&&document.body.removeChild(c)})}(a,n,e)},[(0,o.createElementVNode)('span',ln,(0,o.toDisplayString)(n),1),(0,o.createElementVNode)('span',rn,(0,o.toDisplayString)(e?'✓':'✗'),1)],10,nn))),128))])])):(0,o.createCommentVNode)('v-if',!0)],2))),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',on,[...b[62]||(b[62]=[(0,o.createElementVNode)('span',{class:'no-endings-text'},'暂未达成任何结局',-1)])]))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Ra,[...b[57]||(b[57]=[(0,o.createElementVNode)('span',null,'加载个人线信息中...',-1)])]))])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' 角色详情页面 '),'character-detail'===a.value?((0,o.openBlock)(),(0,o.createElementBlock)('div',cn,[(0,o.createElementVNode)('button',{class:'back-btn view-btn',onClick:b[15]||(b[15]=e=>c(r.value))},[...b[63]||(b[63]=[(0,o.createElementVNode)('i',{class:'fas fa-arrow-left'},null,-1),(0,o.createTextVNode)(' 返回 ',-1)])]),(0,o.createElementVNode)('div',sn,[b[64]||(b[64]=(0,o.createElementVNode)('i',{class:'fas fa-user'},null,-1)),(0,o.createTextVNode)(' '+(0,o.toDisplayString)(n.value),1)]),(0,o.createVNode)(Pe,{characterName:n.value},null,8,['characterName'])])):(0,o.createCommentVNode)('v-if',!0)])}}}),un=(0,Q.A)(dn,[['__scopeId','data-v-60888edd']]);$(async()=>{await waitGlobalInitialized('Mvu'),await e(()=>_.has(getVariables({type:'message'}),'stat_data')),(0,o.createApp)(un).use(t()).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */.character-archive[data-v-fc285b32]{padding:16px 0}.empty-state[data-v-fc285b32]{text-align:center;padding:48px 20px;color:var(--subtext-color);font-style:italic}.empty-state p[data-v-fc285b32]{margin:0;font-size:16px}.character-grid[data-v-fc285b32]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.character-card[data-v-fc285b32]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s ease;position:relative;overflow:hidden}.character-card[data-v-fc285b32]:hover{border-color:var(--blue);box-shadow:0 4px 16px rgba(137,180,250,0.2);transform:translateY(-4px)}.character-avatar[data-v-fc285b32]{width:80px;height:80px;margin:0 auto 12px;border-radius:50%;overflow:hidden;border:2px solid var(--border-color);background-color:var(--quote-bg-color);display:flex;align-items:center;justify-content:center}.character-avatar img[data-v-fc285b32]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[data-v-fc285b32]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:32px;color:var(--subtext-color)}.character-info[data-v-fc285b32]{text-align:center}.character-name[data-v-fc285b32]{font-size:16px;font-weight:600;color:var(--text-color);margin:0 0 12px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.character-stats[data-v-fc285b32]{display:flex;justify-content:center;gap:16px}.stat-item[data-v-fc285b32]{display:flex;align-items:center;gap:4px;font-size:12px;color:var(--subtext-color)}.stat-item i[data-v-fc285b32]{font-size:10px}.character-status-badge[data-v-fc285b32]{position:absolute;top:8px;right:8px;padding:4px 8px;border-radius:12px;font-size:10px;font-weight:600;text-transform:uppercase}.character-status-badge.present[data-v-fc285b32]{background-color:rgba(74,222,128,0.2);color:var(--green)}.character-status-badge.absent[data-v-fc285b32]{background-color:rgba(148,163,184,0.2);color:var(--subtext-color)}@media (max-width:480px){.character-grid[data-v-fc285b32]{grid-template-columns:repeat(2,1fr);gap:12px}.character-card[data-v-fc285b32]{padding:12px}.character-avatar[data-v-fc285b32]{width:60px;height:60px}.character-name[data-v-fc285b32]{font-size:14px}.character-stats[data-v-fc285b32]{gap:8px}.stat-item[data-v-fc285b32]{font-size:10px}}[data-v-fc285b32]:root,body[data-theme='dark'][data-v-fc285b32]{--bg-color:#1e1e2e;--card-bg-color:#181825;--text-color:#cdd6f4;--subtext-color:#a6adc8;--border-color:#313244;--tooltip-bg-color:#11111b;--quote-bg-color:rgba(0,0,0,0.2);--green:#a6e3a1;--pink:#f5c2e7;--purple:#cba6f7;--red:#f38ba8;--blue:#89b4fa;--grey-blue:#6c7086;--green-gradient:linear-gradient(45deg,#a6e3a1,#81c784);--pink-gradient:linear-gradient(45deg,#f5c2e7,#f06292);--purple-gradient:linear-gradient(45deg,#cba6f7,#9575cd);--red-gradient:linear-gradient(45deg,#f38ba8,#e67a85);--grey-blue-gradient:linear-gradient(45deg,#6c7086,#546e7a)}body[data-theme='light'][data-v-fc285b32]{--bg-color:#eff1f5;--card-bg-color:#ffffff;--text-color:#4c4f69;--subtext-color:#6c6f85;--border-color:#ccd0da;--tooltip-bg-color:#5c5f77;--quote-bg-color:#e6e9ef;--green:#40a02b;--pink:#e64584;--purple:#8839ef;--red:#d20f39;--blue:#1e66f5;--grey-blue:#8c8fa1;--green-gradient:linear-gradient(45deg,#66bb6a,#43a047);--pink-gradient:linear-gradient(45deg,#ec407a,#d81b60);--purple-gradient:linear-gradient(45deg,#ab47bc,#8e24aa);--red-gradient:linear-gradient(45deg,#e57373,#d32f2f);--grey-blue-gradient:linear-gradient(45deg,#78909c,#607d8b)}@keyframes card-enter-fc285b32{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes button-click-effect-fc285b32{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes progress-bar-fill-anim-fc285b32{from{width:0}}.status-panel-container[data-v-fc285b32]{position:relative;width:95%;max-width:500px;max-height:600px;margin:10px auto;background-color:var(--bg-color);background-image:url('data:image/svg+xml,%3Csvg width="6" height="6" viewBox="0 0 6 6" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23313244" fill-opacity="0.1" fill-rule="evenodd"%3E%3Cpath d="M5 0h1L0 6V5zM6 5v1H5z"/%3E%3C/g%3E%3C/svg%3E');border:1px solid transparent;border-image:linear-gradient(to bottom right,var(--blue),var(--purple)) 1;border-radius:12px;font-family:'Segoe UI','Microsoft YaHei',system-ui,sans-serif;color:var(--text-color);padding:16px;box-shadow:0 8px 24px rgba(0,0,0,0.2);box-sizing:border-box;transition:background-color 0.3s,border-color 0.3s;overflow-y:auto}#theme-toggle-btn[data-v-fc285b32]{position:absolute;top:16px;right:16px;background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:background-color 0.2s,color 0.2s,border-color 0.3s,transform 0.2s;z-index:1000}#theme-toggle-btn[data-v-fc285b32]:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.1)}#theme-toggle-btn[data-v-fc285b32]:active{animation:button-click-effect-fc285b32 0.2s ease-out}body[data-theme='dark'] .fa-sun[data-v-fc285b32]{display:none}body[data-theme='light'] .fa-moon[data-v-fc285b32]{display:none}.scene-info[data-v-fc285b32]{margin-bottom:24px}.block-title[data-v-fc285b32]{font-size:1.25em;font-weight:bold;color:var(--blue);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);display:flex;align-items:center}.block-title i[data-v-fc285b32]{margin-right:8px;transition:transform 0.2s}.block-title:hover i[data-v-fc285b32]{transform:scale(1.1)}.info-line[data-v-fc285b32]{font-size:1em;margin-bottom:8px;color:var(--subtext-color);display:flex;align-items:center}.info-line i[data-v-fc285b32]{margin-right:10px;width:20px;text-align:center;color:var(--blue);transition:transform 0.2s}.info-line:hover i[data-v-fc285b32]{transform:scale(1.1)}.info-line strong[data-v-fc285b32]{color:var(--text-color)}.char-card[data-v-fc285b32]{background-color:var(--card-bg-color);border-radius:12px;margin-bottom:16px;border:1px solid var(--border-color);border-left:4px solid var(--pink);box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:transform 0.2s ease-out,box-shadow 0.2s ease-out,background-color 0.3s,border-color 0.3s;overflow:hidden;animation:card-enter-fc285b32 0.5s ease-out forwards;cursor:pointer}.char-card[data-v-fc285b32]:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,0.15)}.char-name[data-v-fc285b32]{font-size:1.4em;font-weight:bold;color:var(--pink);padding:16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color 0.2s}.char-name[data-v-fc285b32]:hover{background-color:rgba(255,255,255,0.05)}.char-name .collapse-icon[data-v-fc285b32]{width:1em;height:1em;transition:transform 0.3s ease-out}.char-card.collapsed .collapse-icon[data-v-fc285b32]{transform:rotate(180deg)}.char-details[data-v-fc285b32]{font-size:0.95em;line-height:1.7;padding:0 16px 16px 16px;max-height:1000px;transition:max-height 0.4s ease-in-out,padding 0.4s ease-in-out}.char-card.collapsed .char-details[data-v-fc285b32]{max-height:0;padding-top:0;padding-bottom:0}.char-details .detail-item[data-v-fc285b32]{display:flex;align-items:center;margin:4px 0;color:var(--subtext-color)}.char-details .detail-item i[data-v-fc285b32]{margin-right:8px;width:18px;text-align:center;transition:transform 0.2s}.char-details .detail-item:hover i[data-v-fc285b32]{transform:scale(1.2)}.char-details .detail-item strong[data-v-fc285b32]{color:var(--text-color)}.status-highlight-yes[data-v-fc285b32]{color:var(--green);font-weight:bold}.status-highlight-no[data-v-fc285b32]{color:var(--grey-blue)}.stat-bar-container[data-v-fc285b32]{margin-top:12px}.stat-bar-label[data-v-fc285b32]{display:flex;justify-content:space-between;font-size:0.9em;margin-bottom:6px;color:var(--subtext-color);align-items:center}.stat-bar-title[data-v-fc285b32]{display:flex;align-items:center;position:relative;cursor:default}.stat-bar-title i[data-v-fc285b32]{margin-right:6px;transition:transform 0.2s}.stat-bar-title:hover i[data-v-fc285b32]{transform:scale(1.2)}.stat-bar-title[data-tooltip][data-v-fc285b32]::after{content:attr(data-tooltip);position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background-color:var(--tooltip-bg-color);color:var(--text-color);padding:6px 10px;border-radius:6px;font-size:0.8em;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity 0.2s,visibility 0.2s;z-index:10}.stat-bar-title[data-tooltip][data-v-fc285b32]:hover::after{opacity:1;visibility:visible}.stat-bar-value[data-v-fc285b32]{font-weight:bold;color:var(--text-color)}.progress-bar[data-v-fc285b32]{width:100%;height:14px;background-color:var(--border-color);border-radius:6px;overflow:hidden}.progress-bar-fill[data-v-fc285b32]{height:100%;border-radius:6px;transition:width 0.6s ease-out}.magic-bar[data-v-fc285b32]{background:var(--green-gradient)}.favor-bar-positive[data-v-fc285b32]{background:var(--pink-gradient)}.favor-bar-negative[data-v-fc285b32]{background:var(--grey-blue-gradient)}.corruption-bar[data-v-fc285b32]{background:var(--purple-gradient)}.lust-bar[data-v-fc285b32]{background:var(--red-gradient)}.thought-block[data-v-fc285b32]{margin-top:16px;padding:12px;background-color:var(--quote-bg-color);border-left:3px solid var(--blue);border-radius:0 6px 6px 0}.thought-block .thought-title[data-v-fc285b32]{display:flex;align-items:center;font-weight:bold;margin-bottom:6px;color:var(--subtext-color);font-size:0.9em}.thought-block .thought-title i[data-v-fc285b32]{margin-right:6px;transition:transform 0.2s}.thought-block .thought-title:hover i[data-v-fc285b32]{transform:scale(1.2)}.thought-block p[data-v-fc285b32]{margin:0;color:var(--text-color);font-size:0.95em}.view-toggle-buttons[data-v-fc285b32]{margin-left:auto;display:flex;gap:8px}.view-btn[data-v-fc285b32]{background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);padding:4px 10px;border-radius:20px;cursor:pointer;font-size:0.8em;transition:background-color 0.2s,color 0.2s,transform 0.2s}.view-btn[data-v-fc285b32]:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.05)}.view-btn[data-v-fc285b32]:active{animation:button-click-effect-fc285b32 0.2s ease-out}.view-btn.active[data-v-fc285b32]{background-color:var(--blue);color:var(--bg-color);border-color:var(--blue)}.menu-buttons[data-v-fc285b32]{display:flex;justify-content:space-around;gap:16px;margin-top:24px;padding:10px 0}.menu-btn[data-v-fc285b32]{background-color:var(--card-bg-color);border:1px solid var(--border-color);color:var(--text-color);width:90px;height:90px;border-radius:16px;cursor:pointer;font-size:0.9em;transition:background-color 0.2s,transform 0.2s,box-shadow 0.2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:0}.menu-btn[data-v-fc285b32]:hover{background-color:var(--border-color);transform:translateY(-4px);box-shadow:0 6px 12px rgba(0,0,0,0.1)}.menu-btn[data-v-fc285b32]:active{animation:button-click-effect-fc285b32 0.2s ease-out}.menu-btn i[data-v-fc285b32]{margin-right:0;font-size:2em;color:var(--blue)}.back-btn[data-v-fc285b32]{margin-bottom:16px}.off-scene-char[data-v-fc285b32]{display:flex;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border-color);font-size:0.95em}.off-scene-char[data-v-fc285b32]:last-child{border-bottom:none}.off-scene-char-name[data-v-fc285b32]{font-weight:bold;color:var(--text-color)}.off-scene-char-stats[data-v-fc285b32]{color:var(--subtext-color)}.user-terminal[data-v-fc285b32]{padding:16px}.user-stats-grid[data-v-fc285b32]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-bottom:24px}.user-stat-item[data-v-fc285b32]{background-color:var(--card-bg-color);padding:12px;border-radius:8px;text-align:center;border:1px solid var(--border-color)}.user-stat-item .stat-label[data-v-fc285b32]{font-size:0.9em;color:var(--subtext-color);margin-bottom:6px}.user-stat-item .stat-value[data-v-fc285b32]{font-size:1.5em;font-weight:bold;color:var(--text-color)}.skills-section .section-title[data-v-fc285b32]{font-size:1.1em;font-weight:bold;color:var(--text-color);margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid var(--border-color)}.skill-list[data-v-fc285b32]{list-style:none;padding:0;margin:0}.skill-item[data-v-fc285b32]{background-color:var(--card-bg-color);padding:12px;border-radius:8px;margin-bottom:10px;border-left:3px solid var(--purple)}.skill-item-header[data-v-fc285b32]{display:flex;justify-content:space-between;font-weight:bold}.skill-item .skill-name[data-v-fc285b32]{color:var(--text-color)}.skill-item .skill-cost[data-v-fc285b32]{color:var(--purple)}.skill-item .skill-description[data-v-fc285b32]{font-size:0.9em;color:var(--subtext-color);margin-top:6px}[data-v-fc285b32]::-webkit-scrollbar{width:8px}[data-v-fc285b32]::-webkit-scrollbar-track{background-color:var(--border-color);border-radius:4px}[data-v-fc285b32]::-webkit-scrollbar-thumb{background-color:var(--grey-blue);border-radius:4px}[data-v-fc285b32]::-webkit-scrollbar-thumb:hover{background-color:var(--blue)}@media (max-width:600px){.status-panel-container[data-v-fc285b32]{width:100%;margin:0;border-radius:0}.menu-buttons[data-v-fc285b32]{flex-wrap:wrap;gap:12px}.menu-btn[data-v-fc285b32]{flex:1;min-width:80px}.user-stats-grid[data-v-fc285b32]{grid-template-columns:repeat(2,1fr)}}.loading[data-v-fc285b32]{display:flex;justify-content:center;align-items:center;padding:20px;color:var(--subtext-color)}.loading[data-v-fc285b32]::after{content:'';width:20px;height:20px;border:2px solid var(--border-color);border-top:2px solid var(--blue);border-radius:50%;animation:spin-fc285b32 1s linear infinite;margin-left:10px}@keyframes spin-fc285b32{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.error-message[data-v-fc285b32]{color:var(--red);padding:12px;background-color:rgba(243,139,168,0.1);border:1px solid var(--red);border-radius:8px;margin:16px 0}.success-message[data-v-fc285b32]{color:var(--green);padding:12px;background-color:rgba(166,227,161,0.1);border:1px solid var(--green);border-radius:8px;margin:16px 0}

.character-detail-panel[data-v-0667003e]{display:flex;flex-direction:column;gap:16px;min-height:400px}.character-detail-content[data-v-0667003e]{display:flex;flex-direction:column;gap:16px}.avatar-section[data-v-0667003e]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:0;background-color:rgba(0,0,0,0);border:none;border-radius:12px;overflow:hidden;position:relative;min-height:350px}.avatar-banner[data-v-0667003e]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:0}.character-avatar-img[data-v-0667003e]{width:100%;height:100%;object-fit:cover;object-position:center center}.avatar-bottom-content[data-v-0667003e]{position:absolute;bottom:0;left:0;right:0;z-index:2}.avatar-text-gradient[data-v-0667003e]{position:absolute;bottom:0;left:0;right:0;height:180px;background:linear-gradient(to top,var(--card-bg-color) 0%,var(--card-bg-color) 30%,transparent 100%);pointer-events:none}.avatar-text-wrapper[data-v-0667003e]{position:relative;padding:80px 20px 20px;text-align:center}.avatar-placeholder-large[data-v-0667003e]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:64px;color:var(--subtext-color)}.change-avatar-btn[data-v-0667003e]{position:absolute;bottom:120px;right:12px;width:36px;height:36px;border-radius:50%;background-color:var(--blue);border:2px solid var(--card-bg-color);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 2px 8px rgba(0,0,0,.2);z-index:3}.change-avatar-btn[data-v-0667003e]:hover{background-color:var(--blue-hover,#6d9cf3);transform:scale(1.1)}.character-title[data-v-0667003e]{font-size:24px;font-weight:700;color:var(--text-color);margin-bottom:8px}.avatar-history[data-v-0667003e]{width:100%;margin-top:8px}.history-title[data-v-0667003e]{font-size:12px;color:var(--subtext-color);margin-bottom:8px;text-align:center}.history-list[data-v-0667003e]{display:flex;justify-content:center;gap:8px;flex-wrap:wrap}.history-item[data-v-0667003e]{position:relative;width:48px;height:48px;border-radius:8px;overflow:hidden;border:2px solid var(--border-color);cursor:pointer;transition:all .2s;background-color:var(--quote-bg-color)}.history-item[data-v-0667003e]:hover{border-color:var(--blue);transform:scale(1.1)}.history-item.active[data-v-0667003e]{border-color:var(--green);box-shadow:0 0 0 2px rgba(74,222,128,.3)}.history-item.error[data-v-0667003e]{display:none}.history-item img[data-v-0667003e]{width:100%;height:100%;object-fit:cover}.delete-avatar-btn[data-v-0667003e]{position:absolute;top:2px;right:2px;width:16px;height:16px;border-radius:50%;background-color:var(--red);border:1px solid var(--card-bg-color);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;opacity:0;z-index:10}.delete-avatar-btn i[data-v-0667003e]{font-size:10px}.history-item:hover .delete-avatar-btn[data-v-0667003e]{opacity:1}.delete-avatar-btn[data-v-0667003e]:hover{background-color:#e06c75;transform:scale(1.2)}.description-card[data-v-0667003e]{margin-top:16px}.description-title[data-v-0667003e]{font-size:14px;font-weight:600;color:var(--text-color);margin-bottom:12px;display:flex;align-items:center;gap:8px}.description-title i[data-v-0667003e]{color:var(--blue)}.description-content[data-v-0667003e]{font-size:14px;line-height:1.6;color:var(--subtext-color);padding:0 8px;white-space:pre-wrap;word-wrap:break-word}.description-item[data-v-0667003e]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border-color)}.description-item[data-v-0667003e]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.additional-info[data-v-0667003e]{margin-top:16px}.info-grid[data-v-0667003e]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.info-item[data-v-0667003e]{background-color:var(--card-bg-color);padding:12px;border-radius:8px;border:1px solid var(--border-color);font-size:.9em}.info-item strong[data-v-0667003e]{color:var(--text-color);margin-right:4px}.info-item span[data-v-0667003e]{color:var(--subtext-color)}
.characters-panel[data-v-1ace19ce]{display:flex;flex-direction:column;gap:16px;max-height:500px;overflow-y:auto;padding-right:8px}.characters-panel[data-v-1ace19ce]::-webkit-scrollbar{width:6px}.characters-panel[data-v-1ace19ce]::-webkit-scrollbar-track{background:var(--background-color);border-radius:3px}.characters-panel[data-v-1ace19ce]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.characters-panel[data-v-1ace19ce]::-webkit-scrollbar-thumb:hover{background:var(--subtext-color)}.empty-state[data-v-1ace19ce]{text-align:center;padding:24px;color:var(--subtext-color);font-style:italic}.characters-list[data-v-1ace19ce]{display:flex;flex-direction:column;gap:12px}.char-card[data-v-1ace19ce]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;overflow:hidden;transition:all .2s}.char-card[data-v-1ace19ce]:hover{border-color:var(--hover-color);box-shadow:0 2px 8px rgba(0,0,0,.1)}.char-name[data-v-1ace19ce]{padding:12px 16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;background-color:rgba(0,0,0,.1)}.char-name[data-v-1ace19ce]:hover{background-color:rgba(0,0,0,.15)}.char-name-left[data-v-1ace19ce]{display:flex;align-items:center;gap:10px}.char-avatar[data-v-1ace19ce]{width:64px;height:64px;border-radius:50%;object-fit:cover;border:2px solid var(--border-color)}.char-avatar-placeholder[data-v-1ace19ce]{width:64px;height:64px;border-radius:50%;background-color:var(--background-color);border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;color:var(--subtext-color);font-size:28px}.char-name-text[data-v-1ace19ce]{font-weight:500}.collapse-icon[data-v-1ace19ce]{width:16px;height:16px;transition:transform .3s ease}.collapse-icon.rotated[data-v-1ace19ce]{transform:rotate(180deg)}.character-detail[data-v-1ace19ce]{padding:16px;border-top:1px solid var(--border-color);animation:slideDown-1ace19ce .3s ease}@keyframes slideDown-1ace19ce{from{opacity:0;max-height:0;overflow:hidden}to{opacity:1;max-height:500px;overflow:hidden}}.char-details[data-v-1ace19ce]{display:flex;flex-direction:column;gap:12px}.detail-item[data-v-1ace19ce]{display:flex;align-items:center;gap:8px;font-size:14px}.detail-item i[data-v-1ace19ce]{width:16px;text-align:center;color:var(--text-color)}.detail-item strong[data-v-1ace19ce]{color:var(--text-color);font-weight:600}.detail-item span[data-v-1ace19ce]{color:var(--subtext-color)}.status-highlight-yes[data-v-1ace19ce]{color:var(--green);font-weight:600}.status-highlight-no[data-v-1ace19ce]{color:var(--red);font-weight:600}.stat-bar-container[data-v-1ace19ce]{margin-top:8px}.stat-bar-label[data-v-1ace19ce]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:13px}.stat-bar-title[data-v-1ace19ce]{display:flex;align-items:center;gap:6px;color:var(--text-color)}.stat-bar-value[data-v-1ace19ce]{color:var(--subtext-color);font-size:12px;font-weight:500}.progress-bar[data-v-1ace19ce]{height:8px;background-color:rgba(0,0,0,.2);border-radius:4px;overflow:hidden}.progress-bar-fill[data-v-1ace19ce]{height:100%;border-radius:4px;transition:width .3s ease}.magic-bar[data-v-1ace19ce]{background-color:var(--green)}.favor-bar-positive[data-v-1ace19ce]{background-color:var(--pink)}.favor-bar-negative[data-v-1ace19ce]{background-color:var(--red)}.corruption-bar[data-v-1ace19ce]{background-color:var(--purple)}.lust-bar[data-v-1ace19ce]{background-color:var(--red)}.thought-block[data-v-1ace19ce]{margin-top:12px;padding:12px;background-color:rgba(0,0,0,.1);border-radius:6px;border-left:3px solid var(--blue)}.thought-title[data-v-1ace19ce]{font-size:13px;font-weight:600;color:var(--text-color);margin-bottom:6px;display:flex;align-items:center;gap:6px}.thought-block p[data-v-1ace19ce]{font-size:13px;color:var(--subtext-color);line-height:1.4;margin:0}
.skills-panel[data-v-b5026c5c]{display:flex;flex-direction:column;gap:16px}.panel-title[data-v-b5026c5c]{margin:0 0 8px 0;font-size:16px;color:var(--subtext-color);border-bottom:1px solid var(--border-color);padding-bottom:8px}.skill-points-display[data-v-b5026c5c]{margin-bottom:8px}.points-card[data-v-b5026c5c]{display:flex;align-items:center;gap:12px;background:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:14px 18px}.points-icon[data-v-b5026c5c]{font-size:28px}.points-info[data-v-b5026c5c]{display:flex;flex-direction:column;gap:2px}.points-value[data-v-b5026c5c]{font-size:24px;font-weight:700;color:var(--text-color)}.points-label[data-v-b5026c5c]{font-size:12px;color:var(--subtext-color)}.magic-max-upgrade[data-v-b5026c5c]{background:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:16px;margin-bottom:16px}.upgrade-header[data-v-b5026c5c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.upgrade-title[data-v-b5026c5c]{font-size:14px;font-weight:600;color:var(--text-color)}.current-magic-max[data-v-b5026c5c]{font-size:13px;color:var(--subtext-color)}.upgrade-controls[data-v-b5026c5c]{display:flex;gap:12px;margin-bottom:12px}.input-group[data-v-b5026c5c]{flex:1;display:flex;flex-direction:column;gap:6px}.input-label[data-v-b5026c5c]{font-size:12px;color:var(--subtext-color);font-weight:500}.upgrade-input[data-v-b5026c5c]{padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-color);color:var(--text-color);font-size:14px;transition:all .2s}.upgrade-input[data-v-b5026c5c]:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(137,180,250,.1)}.upgrade-button[data-v-b5026c5c]{padding:8px 16px;background:var(--blue);border:none;border-radius:6px;color:var(--bg-color);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}.upgrade-button[data-v-b5026c5c]:hover:not(.disabled){background:var(--blue);opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px rgba(137,180,250,.3)}.upgrade-button[data-v-b5026c5c]:active:not(.disabled){transform:translateY(0)}.upgrade-button.disabled[data-v-b5026c5c]{background:var(--border-color);color:var(--subtext-color);cursor:not-allowed}.upgrade-info[data-v-b5026c5c]{display:flex;justify-content:space-between;font-size:12px;color:var(--subtext-color);padding-top:8px;border-top:1px solid var(--border-color)}.upgrade-cost[data-v-b5026c5c]{color:var(--red);font-weight:500}.upgrade-result[data-v-b5026c5c]{color:var(--green);font-weight:500}.skills-list[data-v-b5026c5c]{display:flex;flex-direction:column;gap:12px}.skill-card[data-v-b5026c5c]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:14px;transition:all .2s}.skill-card[data-v-b5026c5c]:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2)}.skill-card.learned[data-v-b5026c5c]{border-color:var(--green);background:var(--card-bg-color)}.skill-card.disabled[data-v-b5026c5c]{opacity:.6}.skill-header[data-v-b5026c5c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.skill-title[data-v-b5026c5c]{display:flex;align-items:center;gap:8px}.learned-badge[data-v-b5026c5c]{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;background-color:var(--green);color:var(--bg-color);border-radius:50%;font-size:12px;font-weight:bold}.skill-name[data-v-b5026c5c]{font-size:15px;font-weight:600;color:var(--text-color)}.skill-cost-badge[data-v-b5026c5c]{font-size:11px;color:var(--subtext-color);background-color:var(--card-bg-color);padding:4px 8px;border-radius:4px;border:1px solid var(--border-color)}.skill-description[data-v-b5026c5c]{margin:0 0 12px 0;font-size:13px;color:var(--subtext-color);line-height:1.5}.learn-button[data-v-b5026c5c]{width:100%;padding:10px;background:var(--blue);border:none;border-radius:6px;color:var(--bg-color);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s}.learn-button[data-v-b5026c5c]:hover:not(.disabled){background:var(--blue);opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px rgba(137,180,250,.3)}.learn-button[data-v-b5026c5c]:active:not(.disabled){transform:translateY(0)}.learn-button.disabled[data-v-b5026c5c]{background:var(--border-color);color:var(--subtext-color);cursor:not-allowed}.learned-status[data-v-b5026c5c]{text-align:center;padding:10px;background-color:var(--card-bg-color);border-radius:6px;border:1px solid var(--green)}.learned-text[data-v-b5026c5c]{color:var(--green);font-size:13px;font-weight:600}.empty-skills[data-v-b5026c5c]{text-align:center;padding:24px;color:var(--subtext-color);font-style:italic}@keyframes skill-learned-b5026c5c{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(166,227,161,.7)}50%{transform:scale(1.05);box-shadow:0 0 20px 10px rgba(166,227,161,.4)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(166,227,161,0)}}.skill-learned-animation[data-v-b5026c5c]{animation:skill-learned-b5026c5c 1s ease-in-out}
.story-panel[data-v-bb48bf38]{display:flex;flex-direction:column;gap:16px;max-height:500px;overflow-y:auto;padding-right:8px}.story-panel[data-v-bb48bf38]::-webkit-scrollbar{width:6px}.story-panel[data-v-bb48bf38]::-webkit-scrollbar-track{background:var(--border-color);border-radius:3px}.story-panel[data-v-bb48bf38]::-webkit-scrollbar-thumb{background:var(--grey-blue);border-radius:3px}.story-panel[data-v-bb48bf38]::-webkit-scrollbar-thumb:hover{background:var(--blue)}.panel-title[data-v-bb48bf38]{margin:0 0 8px 0;font-size:16px;color:var(--text-color);border-bottom:1px solid var(--border-color);padding-bottom:8px}.empty-state[data-v-bb48bf38]{text-align:center;padding:24px;color:var(--subtext-color);font-style:italic}.story-list[data-v-bb48bf38]{display:flex;flex-direction:column;gap:12px}.story-card[data-v-bb48bf38]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:14px;transition:all .2s;cursor:pointer}.story-card[data-v-bb48bf38]:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2);transform:translateY(-2px)}.story-card.completed[data-v-bb48bf38]{border-color:var(--green);background:linear-gradient(135deg,var(--card-bg-color) 0%,rgba(166,227,161,0.1) 100%)}.story-card.in-progress[data-v-bb48bf38]{border-color:#fbbf24;background:linear-gradient(135deg,var(--card-bg-color) 0%,rgba(251,191,36,0.1) 100%)}.story-header[data-v-bb48bf38]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.story-name[data-v-bb48bf38]{font-size:15px;font-weight:600;color:var(--text-color)}.story-header-right[data-v-bb48bf38]{display:flex;align-items:center;gap:12px}.story-status[data-v-bb48bf38]{font-size:11px;padding:4px 8px;border-radius:4px;font-weight:600;text-transform:uppercase}.story-header-right i[data-v-bb48bf38]{color:var(--subtext-color);font-size:14px;transition:transform .2s}.story-card:hover .story-header-right i[data-v-bb48bf38]{transform:translateX(4px);color:var(--text-color)}.story-preview[data-v-bb48bf38]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color);font-size:13px}.endings-preview[data-v-bb48bf38]{color:var(--subtext-color)}.endings-count[data-v-bb48bf38]{font-weight:500}.no-endings-preview[data-v-bb48bf38]{color:var(--subtext-color);font-style:italic}.status-not-started[data-v-bb48bf38]{background-color:var(--grey-blue);color:var(--text-color)}.status-in-progress[data-v-bb48bf38]{background-color:#fbbf24;color:#1a1a2e}.status-completed[data-v-bb48bf38]{background-color:var(--green);color:#1a1a2e}.status-unknown[data-v-bb48bf38]{background-color:var(--grey-blue);color:var(--text-color)}.status-ending-completed[data-v-bb48bf38]{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#1a1a2e;font-weight:bold;animation:glow-bb48bf38 2s ease-in-out infinite alternate}.story-card.ending-completed[data-v-bb48bf38]{border-color:#f59e0b;background:linear-gradient(135deg,var(--card-bg-color) 0%,rgba(245,158,11,0.1) 100%);box-shadow:0 2px 8px rgba(245,158,11,.2)}.completed-endings-count[data-v-bb48bf38]{color:#f59e0b;font-weight:bold;margin-left:8px}@keyframes glow-bb48bf38{from{box-shadow:0 0 5px rgba(245,158,11,.5)}to{box-shadow:0 0 20px rgba(245,158,11,.8)}}.endings-section[data-v-bb48bf38]{margin-top:12px}.endings-title[data-v-bb48bf38]{font-size:12px;color:var(--subtext-color);margin-bottom:8px;font-weight:500}.endings-list[data-v-bb48bf38]{display:flex;flex-wrap:wrap;gap:8px}.ending-item[data-v-bb48bf38]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:6px;padding:6px 10px;transition:all .2s}.ending-item[data-v-bb48bf38]:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2);transform:translateY(-1px)}.ending-header[data-v-bb48bf38]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.ending-name[data-v-bb48bf38]{font-size:12px;color:var(--text-color);font-weight:500}.ending-conditions[data-v-bb48bf38]{margin-top:6px;padding-top:6px;border-top:1px solid var(--border-color)}.conditions-title[data-v-bb48bf38]{font-size:10px;color:var(--subtext-color);margin-bottom:4px;font-weight:500}.conditions-list[data-v-bb48bf38]{display:flex;flex-direction:column;gap:4px}.condition-item[data-v-bb48bf38]{display:flex;justify-content:space-between;align-items:center;font-size:10px;padding:3px 6px;background-color:var(--quote-bg-color);border-radius:4px}.condition-item.condition-met[data-v-bb48bf38]{background-color:rgba(166,227,161,.1);border-left:2px solid var(--green)}.condition-name[data-v-bb48bf38]{color:var(--subtext-color)}.condition-status[data-v-bb48bf38]{font-weight:bold;margin-left:8px}.condition-item.condition-met .condition-status[data-v-bb48bf38]{color:var(--green)}.condition-item:not(.condition-met) .condition-status[data-v-bb48bf38]{color:var(--red)}.no-endings[data-v-bb48bf38]{margin-top:12px;padding:12px;background-color:var(--quote-bg-color);border-radius:6px;text-align:center}.no-endings-text[data-v-bb48bf38]{font-size:12px;color:var(--subtext-color);font-style:italic}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */[data-v-60888edd]:root,body[data-theme='dark'][data-v-60888edd]{--bg-color:#1e1e2e;--card-bg-color:#181825;--text-color:#cdd6f4;--subtext-color:#a6adc8;--border-color:#313244;--tooltip-bg-color:#11111b;--quote-bg-color:rgba(0,0,0,0.2);--green:#a6e3a1;--pink:#f5c2e7;--purple:#cba6f7;--red:#f38ba8;--blue:#89b4fa;--grey-blue:#6c7086;--green-gradient:linear-gradient(45deg,#a6e3a1,#81c784);--pink-gradient:linear-gradient(45deg,#f5c2e7,#f06292);--purple-gradient:linear-gradient(45deg,#cba6f7,#9575cd);--red-gradient:linear-gradient(45deg,#f38ba8,#e67a85);--grey-blue-gradient:linear-gradient(45deg,#6c7086,#546e7a)}body[data-theme='light'][data-v-60888edd]{--bg-color:#eff1f5;--card-bg-color:#ffffff;--text-color:#4c4f69;--subtext-color:#6c6f85;--border-color:#ccd0da;--tooltip-bg-color:#5c5f77;--quote-bg-color:#e6e9ef;--green:#40a02b;--pink:#e64584;--purple:#8839ef;--red:#d20f39;--blue:#1e66f5;--grey-blue:#8c8fa1;--green-gradient:linear-gradient(45deg,#66bb6a,#43a047);--pink-gradient:linear-gradient(45deg,#ec407a,#d81b60);--purple-gradient:linear-gradient(45deg,#ab47bc,#8e24aa);--red-gradient:linear-gradient(45deg,#e57373,#d32f2f);--grey-blue-gradient:linear-gradient(45deg,#78909c,#607d8b)}@keyframes card-enter-60888edd{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes button-click-effect-60888edd{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes progress-bar-fill-anim-60888edd{from{width:0}}.status-panel-container[data-v-60888edd]{position:relative;width:95%;max-width:500px;max-height:600px;margin:10px auto;background-color:var(--bg-color);background-image:url('data:image/svg+xml,%3Csvg width="6" height="6" viewBox="0 0 6 6" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23313244" fill-opacity="0.1" fill-rule="evenodd"%3E%3Cpath d="M5 0h1L0 6V5zM6 5v1H5z"/%3E%3C/g%3E%3C/svg%3E');border:1px solid transparent;border-image:linear-gradient(to bottom right,var(--blue),var(--purple)) 1;border-radius:12px;font-family:'Segoe UI','Microsoft YaHei',system-ui,sans-serif;color:var(--text-color);padding:16px;box-shadow:0 8px 24px rgba(0,0,0,0.2);box-sizing:border-box;transition:background-color 0.3s,border-color 0.3s;overflow-y:auto}#theme-toggle-btn[data-v-60888edd]{position:absolute;top:16px;right:16px;background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:background-color 0.2s,color 0.2s,border-color 0.3s,transform 0.2s;z-index:1000}#theme-toggle-btn[data-v-60888edd]:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.1)}#theme-toggle-btn[data-v-60888edd]:active{animation:button-click-effect-60888edd 0.2s ease-out}body[data-theme='dark'] .fa-sun[data-v-60888edd]{display:none}body[data-theme='light'] .fa-moon[data-v-60888edd]{display:none}.scene-info[data-v-60888edd]{margin-bottom:24px}.block-title[data-v-60888edd]{font-size:1.25em;font-weight:bold;color:var(--blue);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);display:flex;align-items:center}.block-title i[data-v-60888edd]{margin-right:8px;transition:transform 0.2s}.block-title:hover i[data-v-60888edd]{transform:scale(1.1)}.info-line[data-v-60888edd]{font-size:1em;margin-bottom:8px;color:var(--subtext-color);display:flex;align-items:center}.info-line i[data-v-60888edd]{margin-right:10px;width:20px;text-align:center;color:var(--blue);transition:transform 0.2s}.info-line:hover i[data-v-60888edd]{transform:scale(1.1)}.info-line strong[data-v-60888edd]{color:var(--text-color)}.char-card[data-v-60888edd]{background-color:var(--card-bg-color);border-radius:12px;margin-bottom:16px;border:1px solid var(--border-color);border-left:4px solid var(--pink);box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:transform 0.2s ease-out,box-shadow 0.2s ease-out,background-color 0.3s,border-color 0.3s;overflow:hidden;animation:card-enter-60888edd 0.5s ease-out forwards;cursor:pointer}.char-card[data-v-60888edd]:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,0.15)}.char-name[data-v-60888edd]{font-size:1.4em;font-weight:bold;color:var(--pink);padding:16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color 0.2s}.char-name[data-v-60888edd]:hover{background-color:rgba(255,255,255,0.05)}.char-name .collapse-icon[data-v-60888edd]{width:1em;height:1em;transition:transform 0.3s ease-out}.char-card.collapsed .collapse-icon[data-v-60888edd]{transform:rotate(180deg)}.char-details[data-v-60888edd]{font-size:0.95em;line-height:1.7;padding:0 16px 16px 16px;max-height:1000px;transition:max-height 0.4s ease-in-out,padding 0.4s ease-in-out}.char-card.collapsed .char-details[data-v-60888edd]{max-height:0;padding-top:0;padding-bottom:0}.char-details .detail-item[data-v-60888edd]{display:flex;align-items:center;margin:4px 0;color:var(--subtext-color)}.char-details .detail-item i[data-v-60888edd]{margin-right:8px;width:18px;text-align:center;transition:transform 0.2s}.char-details .detail-item:hover i[data-v-60888edd]{transform:scale(1.2)}.char-details .detail-item strong[data-v-60888edd]{color:var(--text-color)}.status-highlight-yes[data-v-60888edd]{color:var(--green);font-weight:bold}.status-highlight-no[data-v-60888edd]{color:var(--grey-blue)}.stat-bar-container[data-v-60888edd]{margin-top:12px}.stat-bar-label[data-v-60888edd]{display:flex;justify-content:space-between;font-size:0.9em;margin-bottom:6px;color:var(--subtext-color);align-items:center}.stat-bar-title[data-v-60888edd]{display:flex;align-items:center;position:relative;cursor:default}.stat-bar-title i[data-v-60888edd]{margin-right:6px;transition:transform 0.2s}.stat-bar-title:hover i[data-v-60888edd]{transform:scale(1.2)}.stat-bar-title[data-tooltip][data-v-60888edd]::after{content:attr(data-tooltip);position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background-color:var(--tooltip-bg-color);color:var(--text-color);padding:6px 10px;border-radius:6px;font-size:0.8em;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity 0.2s,visibility 0.2s;z-index:10}.stat-bar-title[data-tooltip][data-v-60888edd]:hover::after{opacity:1;visibility:visible}.stat-bar-value[data-v-60888edd]{font-weight:bold;color:var(--text-color)}.progress-bar[data-v-60888edd]{width:100%;height:14px;background-color:var(--border-color);border-radius:6px;overflow:hidden}.progress-bar-fill[data-v-60888edd]{height:100%;border-radius:6px;transition:width 0.6s ease-out}.magic-bar[data-v-60888edd]{background:var(--green-gradient)}.favor-bar-positive[data-v-60888edd]{background:var(--pink-gradient)}.favor-bar-negative[data-v-60888edd]{background:var(--grey-blue-gradient)}.corruption-bar[data-v-60888edd]{background:var(--purple-gradient)}.lust-bar[data-v-60888edd]{background:var(--red-gradient)}.thought-block[data-v-60888edd]{margin-top:16px;padding:12px;background-color:var(--quote-bg-color);border-left:3px solid var(--blue);border-radius:0 6px 6px 0}.thought-block .thought-title[data-v-60888edd]{display:flex;align-items:center;font-weight:bold;margin-bottom:6px;color:var(--subtext-color);font-size:0.9em}.thought-block .thought-title i[data-v-60888edd]{margin-right:6px;transition:transform 0.2s}.thought-block .thought-title:hover i[data-v-60888edd]{transform:scale(1.2)}.thought-block p[data-v-60888edd]{margin:0;color:var(--text-color);font-size:0.95em}.view-toggle-buttons[data-v-60888edd]{margin-left:auto;display:flex;gap:8px}.view-btn[data-v-60888edd]{background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);padding:4px 10px;border-radius:20px;cursor:pointer;font-size:0.8em;transition:background-color 0.2s,color 0.2s,transform 0.2s}.view-btn[data-v-60888edd]:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.05)}.view-btn[data-v-60888edd]:active{animation:button-click-effect-60888edd 0.2s ease-out}.view-btn.active[data-v-60888edd]{background-color:var(--blue);color:var(--bg-color);border-color:var(--blue)}.menu-buttons[data-v-60888edd]{display:flex;justify-content:space-around;gap:16px;margin-top:24px;padding:10px 0}.menu-btn[data-v-60888edd]{background-color:var(--card-bg-color);border:1px solid var(--border-color);color:var(--text-color);width:90px;height:90px;border-radius:16px;cursor:pointer;font-size:0.9em;transition:background-color 0.2s,transform 0.2s,box-shadow 0.2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:0}.menu-btn[data-v-60888edd]:hover{background-color:var(--border-color);transform:translateY(-4px);box-shadow:0 6px 12px rgba(0,0,0,0.1)}.menu-btn[data-v-60888edd]:active{animation:button-click-effect-60888edd 0.2s ease-out}.menu-btn i[data-v-60888edd]{margin-right:0;font-size:2em;color:var(--blue)}.back-btn[data-v-60888edd]{margin-bottom:16px}.off-scene-char[data-v-60888edd]{display:flex;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border-color);font-size:0.95em}.off-scene-char[data-v-60888edd]:last-child{border-bottom:none}.off-scene-char-name[data-v-60888edd]{font-weight:bold;color:var(--text-color)}.off-scene-char-stats[data-v-60888edd]{color:var(--subtext-color)}.user-terminal[data-v-60888edd]{padding:16px}.user-stats-grid[data-v-60888edd]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-bottom:24px}.user-stat-item[data-v-60888edd]{background-color:var(--card-bg-color);padding:12px;border-radius:8px;text-align:center;border:1px solid var(--border-color)}.user-stat-item .stat-label[data-v-60888edd]{font-size:0.9em;color:var(--subtext-color);margin-bottom:6px}.user-stat-item .stat-value[data-v-60888edd]{font-size:1.5em;font-weight:bold;color:var(--text-color)}.skills-section .section-title[data-v-60888edd]{font-size:1.1em;font-weight:bold;color:var(--text-color);margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid var(--border-color)}.skill-list[data-v-60888edd]{list-style:none;padding:0;margin:0}.skill-item[data-v-60888edd]{background-color:var(--card-bg-color);padding:12px;border-radius:8px;margin-bottom:10px;border-left:3px solid var(--purple)}.skill-item-header[data-v-60888edd]{display:flex;justify-content:space-between;font-weight:bold}.skill-item .skill-name[data-v-60888edd]{color:var(--text-color)}.skill-item .skill-cost[data-v-60888edd]{color:var(--purple)}.skill-item .skill-description[data-v-60888edd]{font-size:0.9em;color:var(--subtext-color);margin-top:6px}[data-v-60888edd]::-webkit-scrollbar{width:8px}[data-v-60888edd]::-webkit-scrollbar-track{background-color:var(--border-color);border-radius:4px}[data-v-60888edd]::-webkit-scrollbar-thumb{background-color:var(--grey-blue);border-radius:4px}[data-v-60888edd]::-webkit-scrollbar-thumb:hover{background-color:var(--blue)}@media (max-width:600px){.status-panel-container[data-v-60888edd]{width:100%;margin:0;border-radius:0}.menu-buttons[data-v-60888edd]{flex-wrap:wrap;gap:12px}.menu-btn[data-v-60888edd]{flex:1;min-width:80px}.user-stats-grid[data-v-60888edd]{grid-template-columns:repeat(2,1fr)}}.loading[data-v-60888edd]{display:flex;justify-content:center;align-items:center;padding:20px;color:var(--subtext-color)}.loading[data-v-60888edd]::after{content:'';width:20px;height:20px;border:2px solid var(--border-color);border-top:2px solid var(--blue);border-radius:50%;animation:spin-60888edd 1s linear infinite;margin-left:10px}@keyframes spin-60888edd{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.error-message[data-v-60888edd]{color:var(--red);padding:12px;background-color:rgba(243,139,168,0.1);border:1px solid var(--red);border-radius:8px;margin:16px 0}.success-message[data-v-60888edd]{color:var(--green);padding:12px;background-color:rgba(166,227,161,0.1);border:1px solid var(--green);border-radius:8px;margin:16px 0}.page-view[data-v-60888edd]{animation:card-enter-60888edd .5s ease-out forwards}.status-ending-completed[data-v-60888edd]{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#1a1a2e;font-weight:bold;animation:glow-60888edd 2s ease-in-out infinite alternate}.ending-item.ending-completed[data-v-60888edd]{border-color:#f59e0b;background:linear-gradient(135deg,var(--card-bg-color) 0%,rgba(245,158,11,0.1) 100%);box-shadow:0 2px 8px rgba(245,158,11,.2)}.ending-name.ending-name-completed[data-v-60888edd]{color:#f59e0b;font-weight:bold;text-shadow:0 0 8px rgba(245,158,11,.5)}.ending-completed-badge[data-v-60888edd]{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#1a1a2e;font-size:10px;padding:4px 8px;border-radius:4px;font-weight:bold;animation:glow-60888edd 2s ease-in-out infinite alternate}@keyframes glow-60888edd{from{box-shadow:0 0 5px rgba(245,158,11,.5)}to{box-shadow:0 0 20px rgba(245,158,11,.8)}}#characters-page[data-v-60888edd],#archive-page[data-v-60888edd],#terminal-page[data-v-60888edd],#skill-list-page[data-v-60888edd],#learn-skills-page[data-v-60888edd],#story-page[data-v-60888edd],#story-detail-page[data-v-60888edd],#character-detail-page[data-v-60888edd]{min-height:400px}.user-stats-section[data-v-60888edd]{margin:16px 0}.stats-grid[data-v-60888edd]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.stat-card[data-v-60888edd]{display:flex;flex-direction:column;align-items:center;gap:8px;background:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:16px;text-align:center;transition:all .2s}.stat-card[data-v-60888edd]:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2);transform:translateY(-2px)}.stat-icon[data-v-60888edd]{font-size:32px}.stat-info[data-v-60888edd]{display:flex;flex-direction:column;gap:4px}.stat-value[data-v-60888edd]{font-size:24px;font-weight:700;color:var(--text-color)}.stat-value.positive[data-v-60888edd]{color:var(--green)}.stat-value.negative[data-v-60888edd]{color:var(--red)}.stat-label[data-v-60888edd]{font-size:12px;color:var(--subtext-color)}.skills-section[data-v-60888edd]{margin-top:24px}.skill-cards[data-v-60888edd]{display:flex;gap:16px;margin-bottom:16px}.skill-card[data-v-60888edd]{flex:1;background:var(--card-bg-color);border:1px solid var(--border-color);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;text-align:center}.skill-card[data-v-60888edd]:hover{border-color:var(--blue);box-shadow:0 4px 16px rgba(137,180,250,.2);transform:translateY(-2px)}.skill-card-icon[data-v-60888edd]{width:64px;height:64px;display:flex;align-items:center;justify-content:center;color:var(--blue)}.skill-card-text[data-v-60888edd]{display:flex;align-items:center;gap:6px}.skill-card-title[data-v-60888edd]{font-size:16px;font-weight:600;color:var(--text-color)}.skill-card-count[data-v-60888edd]{font-size:14px;color:var(--subtext-color)}.skill-list-content[data-v-60888edd]{margin-top:16px}.learned-skills-list[data-v-60888edd]{display:flex;flex-direction:column;gap:12px}.learned-skill-item[data-v-60888edd]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:16px;transition:all .2s}.learned-skill-item[data-v-60888edd]:hover{border-color:var(--blue);box-shadow:0 4px 16px rgba(137,180,250,.15)}.skill-item-header[data-v-60888edd]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.skill-check[data-v-60888edd]{color:var(--green);margin-right:12px}.skill-name[data-v-60888edd]{flex:1;font-size:16px;font-weight:600;color:var(--text-color)}.skill-status[data-v-60888edd]{font-size:14px;font-weight:500;color:var(--green);background-color:rgba(74,222,128,.1);padding:4px 12px;border-radius:12px}.skill-description[data-v-60888edd]{font-size:14px;color:var(--subtext-color);line-height:1.4;margin-top:8px;padding-top:8px;border-top:1px solid var(--border-color)}.learn-skills-content[data-v-60888edd]{margin-top:8px}.story-detail-content[data-v-60888edd]{margin-top:20px;display:flex;flex-direction:column;gap:16px}.story-detail-card[data-v-60888edd]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:8px;padding:20px}.story-status[data-v-60888edd]{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid var(--border-color)}.story-status strong[data-v-60888edd]{color:var(--text-color)}.story-status span[data-v-60888edd]{font-size:14px;padding:6px 12px;border-radius:4px;font-weight:600;text-transform:uppercase}.status-not-started[data-v-60888edd]{background-color:#6a6a8a;color:#c0c0e0}.status-in-progress[data-v-60888edd]{background-color:#fbbf24;color:#1a1a2e}.status-completed[data-v-60888edd]{background-color:#4ade80;color:#1a1a2e}.status-unknown[data-v-60888edd]{background-color:#8888a8;color:#e0e0e0}.endings-section[data-v-60888edd]{margin-top:20px}.endings-title[data-v-60888edd]{font-size:14px;color:#8888a8;margin-bottom:12px;font-weight:500}.endings-list[data-v-60888edd]{display:flex;flex-direction:column;gap:16px}.ending-item[data-v-60888edd]{background-color:var(--card-bg-color);border:1px solid var(--border-color);border-radius:6px;padding:12px 16px;transition:all .2s}.ending-item[data-v-60888edd]:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2);transform:translateY(-1px)}.ending-header[data-v-60888edd]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.ending-name[data-v-60888edd]{font-size:14px;color:var(--text-color);font-weight:500}.ending-description[data-v-60888edd]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color)}.description-title[data-v-60888edd]{font-size:12px;color:var(--subtext-color);margin-bottom:8px;font-weight:500}.description-content[data-v-60888edd]{font-size:13px;color:var(--text-color);line-height:1.4;margin:0;padding:8px 12px;background-color:var(--quote-bg-color);border-radius:4px}.ending-conditions[data-v-60888edd]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color)}.conditions-title[data-v-60888edd]{font-size:12px;color:var(--subtext-color);margin-bottom:8px;font-weight:500}.conditions-list[data-v-60888edd]{display:flex;flex-direction:column;gap:6px}.condition-item[data-v-60888edd]{display:flex;justify-content:space-between;align-items:center;font-size:12px;padding:6px 10px;background-color:var(--quote-bg-color);border-radius:4px;cursor:pointer;transition:all .2s}.condition-item[data-v-60888edd]:hover{background-color:var(--card-bg-color);border:1px solid var(--blue);box-shadow:0 2px 8px rgba(137,180,250,.2);transform:translateY(-1px)}.condition-item.condition-met[data-v-60888edd]{background-color:rgba(74,222,128,.1);border-left:2px solid var(--green)}.condition-item.condition-met[data-v-60888edd]:hover{background-color:rgba(166,227,161,.2);border-color:var(--green);box-shadow:0 2px 8px rgba(166,227,161,.3)}.condition-name[data-v-60888edd]{color:var(--subtext-color)}.condition-status[data-v-60888edd]{font-weight:bold;margin-left:12px}.condition-item.condition-met .condition-status[data-v-60888edd]{color:var(--green)}.condition-item:not(.condition-met) .condition-status[data-v-60888edd]{color:var(--red)}.no-endings[data-v-60888edd]{margin-top:20px;padding:20px;background-color:var(--quote-bg-color);border-radius:6px;text-align:center}.no-endings-text[data-v-60888edd]{font-size:14px;color:var(--subtext-color);font-style:italic}.loading[data-v-60888edd]{text-align:center;padding:40px;color:var(--subtext-color);font-style:italic}
:root,body[data-theme='dark']{--bg-color:#1e1e2e;--card-bg-color:#181825;--text-color:#cdd6f4;--subtext-color:#a6adc8;--border-color:#313244;--tooltip-bg-color:#11111b;--quote-bg-color:rgba(0,0,0,0.2);--green:#a6e3a1;--pink:#f5c2e7;--purple:#cba6f7;--red:#f38ba8;--blue:#89b4fa;--grey-blue:#6c7086;--green-gradient:linear-gradient(45deg,#a6e3a1,#81c784);--pink-gradient:linear-gradient(45deg,#f5c2e7,#f06292);--purple-gradient:linear-gradient(45deg,#cba6f7,#9575cd);--red-gradient:linear-gradient(45deg,#f38ba8,#e67a85);--grey-blue-gradient:linear-gradient(45deg,#6c7086,#546e7a)}body[data-theme='light']{--bg-color:#eff1f5;--card-bg-color:#ffffff;--text-color:#4c4f69;--subtext-color:#6c6f85;--border-color:#ccd0da;--tooltip-bg-color:#5c5f77;--quote-bg-color:#e6e9ef;--green:#40a02b;--pink:#e64584;--purple:#8839ef;--red:#d20f39;--blue:#1e66f5;--grey-blue:#8c8fa1;--green-gradient:linear-gradient(45deg,#66bb6a,#43a047);--pink-gradient:linear-gradient(45deg,#ec407a,#d81b60);--purple-gradient:linear-gradient(45deg,#ab47bc,#8e24aa);--red-gradient:linear-gradient(45deg,#e57373,#d32f2f);--grey-blue-gradient:linear-gradient(45deg,#78909c,#607d8b)}@keyframes card-enter{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes button-click-effect{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes progress-bar-fill-anim{from{width:0}}.status-panel-container{position:relative;width:95%;max-width:500px;max-height:600px;margin:10px auto;background-color:var(--bg-color);background-image:url('data:image/svg+xml,%3Csvg width="6" height="6" viewBox="0 0 6 6" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23313244" fill-opacity="0.1" fill-rule="evenodd"%3E%3Cpath d="M5 0h1L0 6V5zM6 5v1H5z"/%3E%3C/g%3E%3C/svg%3E');border:1px solid transparent;border-image:linear-gradient(to bottom right,var(--blue),var(--purple)) 1;border-radius:12px;font-family:'Segoe UI','Microsoft YaHei',system-ui,sans-serif;color:var(--text-color);padding:16px;box-shadow:0 8px 24px rgba(0,0,0,0.2);box-sizing:border-box;transition:background-color 0.3s,border-color 0.3s;overflow-y:auto}#theme-toggle-btn{position:absolute;top:16px;right:16px;background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:background-color 0.2s,color 0.2s,border-color 0.3s,transform 0.2s;z-index:1000}#theme-toggle-btn:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.1)}#theme-toggle-btn:active{animation:button-click-effect 0.2s ease-out}body[data-theme='dark'] .fa-sun{display:none}body[data-theme='light'] .fa-moon{display:none}.scene-info{margin-bottom:24px}.block-title{font-size:1.25em;font-weight:bold;color:var(--blue);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);display:flex;align-items:center}.block-title i{margin-right:8px;transition:transform 0.2s}.block-title:hover i{transform:scale(1.1)}.info-line{font-size:1em;margin-bottom:8px;color:var(--subtext-color);display:flex;align-items:center}.info-line i{margin-right:10px;width:20px;text-align:center;color:var(--blue);transition:transform 0.2s}.info-line:hover i{transform:scale(1.1)}.info-line strong{color:var(--text-color)}.char-card{background-color:var(--card-bg-color);border-radius:12px;margin-bottom:16px;border:1px solid var(--border-color);border-left:4px solid var(--pink);box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:transform 0.2s ease-out,box-shadow 0.2s ease-out,background-color 0.3s,border-color 0.3s;overflow:hidden;animation:card-enter 0.5s ease-out forwards;cursor:pointer}.char-card:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,0.15)}.char-name{font-size:1.4em;font-weight:bold;color:var(--pink);padding:16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color 0.2s}.char-name:hover{background-color:rgba(255,255,255,0.05)}.char-name .collapse-icon{width:1em;height:1em;transition:transform 0.3s ease-out}.char-card.collapsed .collapse-icon{transform:rotate(180deg)}.char-details{font-size:0.95em;line-height:1.7;padding:0 16px 16px 16px;max-height:1000px;transition:max-height 0.4s ease-in-out,padding 0.4s ease-in-out}.char-card.collapsed .char-details{max-height:0;padding-top:0;padding-bottom:0}.char-details .detail-item{display:flex;align-items:center;margin:4px 0;color:var(--subtext-color)}.char-details .detail-item i{margin-right:8px;width:18px;text-align:center;transition:transform 0.2s}.char-details .detail-item:hover i{transform:scale(1.2)}.char-details .detail-item strong{color:var(--text-color)}.status-highlight-yes{color:var(--green);font-weight:bold}.status-highlight-no{color:var(--grey-blue)}.stat-bar-container{margin-top:12px}.stat-bar-label{display:flex;justify-content:space-between;font-size:0.9em;margin-bottom:6px;color:var(--subtext-color);align-items:center}.stat-bar-title{display:flex;align-items:center;position:relative;cursor:default}.stat-bar-title i{margin-right:6px;transition:transform 0.2s}.stat-bar-title:hover i{transform:scale(1.2)}.stat-bar-title[data-tooltip]::after{content:attr(data-tooltip);position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background-color:var(--tooltip-bg-color);color:var(--text-color);padding:6px 10px;border-radius:6px;font-size:0.8em;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity 0.2s,visibility 0.2s;z-index:10}.stat-bar-title[data-tooltip]:hover::after{opacity:1;visibility:visible}.stat-bar-value{font-weight:bold;color:var(--text-color)}.progress-bar{width:100%;height:14px;background-color:var(--border-color);border-radius:6px;overflow:hidden}.progress-bar-fill{height:100%;border-radius:6px;transition:width 0.6s ease-out}.magic-bar{background:var(--green-gradient)}.favor-bar-positive{background:var(--pink-gradient)}.favor-bar-negative{background:var(--grey-blue-gradient)}.corruption-bar{background:var(--purple-gradient)}.lust-bar{background:var(--red-gradient)}.thought-block{margin-top:16px;padding:12px;background-color:var(--quote-bg-color);border-left:3px solid var(--blue);border-radius:0 6px 6px 0}.thought-block .thought-title{display:flex;align-items:center;font-weight:bold;margin-bottom:6px;color:var(--subtext-color);font-size:0.9em}.thought-block .thought-title i{margin-right:6px;transition:transform 0.2s}.thought-block .thought-title:hover i{transform:scale(1.2)}.thought-block p{margin:0;color:var(--text-color);font-size:0.95em}.view-toggle-buttons{margin-left:auto;display:flex;gap:8px}.view-btn{background:transparent;border:1px solid var(--border-color);color:var(--subtext-color);padding:4px 10px;border-radius:20px;cursor:pointer;font-size:0.8em;transition:background-color 0.2s,color 0.2s,transform 0.2s}.view-btn:hover{background-color:var(--border-color);color:var(--text-color);transform:scale(1.05)}.view-btn:active{animation:button-click-effect 0.2s ease-out}.view-btn.active{background-color:var(--blue);color:var(--bg-color);border-color:var(--blue)}.menu-buttons{display:flex;justify-content:space-around;gap:16px;margin-top:24px;padding:10px 0}.menu-btn{background-color:var(--card-bg-color);border:1px solid var(--border-color);color:var(--text-color);width:90px;height:90px;border-radius:16px;cursor:pointer;font-size:0.9em;transition:background-color 0.2s,transform 0.2s,box-shadow 0.2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:0}.menu-btn:hover{background-color:var(--border-color);transform:translateY(-4px);box-shadow:0 6px 12px rgba(0,0,0,0.1)}.menu-btn:active{animation:button-click-effect 0.2s ease-out}.menu-btn i{margin-right:0;font-size:2em;color:var(--blue)}.back-btn{margin-bottom:16px}.off-scene-char{display:flex;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border-color);font-size:0.95em}.off-scene-char:last-child{border-bottom:none}.off-scene-char-name{font-weight:bold;color:var(--text-color)}.off-scene-char-stats{color:var(--subtext-color)}.user-terminal{padding:16px}.user-stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-bottom:24px}.user-stat-item{background-color:var(--card-bg-color);padding:12px;border-radius:8px;text-align:center;border:1px solid var(--border-color)}.user-stat-item .stat-label{font-size:0.9em;color:var(--subtext-color);margin-bottom:6px}.user-stat-item .stat-value{font-size:1.5em;font-weight:bold;color:var(--text-color)}.skills-section .section-title{font-size:1.1em;font-weight:bold;color:var(--text-color);margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid var(--border-color)}.skill-list{list-style:none;padding:0;margin:0}.skill-item{background-color:var(--card-bg-color);padding:12px;border-radius:8px;margin-bottom:10px;border-left:3px solid var(--purple)}.skill-item-header{display:flex;justify-content:space-between;font-weight:bold}.skill-item .skill-name{color:var(--text-color)}.skill-item .skill-cost{color:var(--purple)}.skill-item .skill-description{font-size:0.9em;color:var(--subtext-color);margin-top:6px}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background-color:var(--border-color);border-radius:4px}::-webkit-scrollbar-thumb{background-color:var(--grey-blue);border-radius:4px}::-webkit-scrollbar-thumb:hover{background-color:var(--blue)}@media (max-width:600px){.status-panel-container{width:100%;margin:0;border-radius:0}.menu-buttons{flex-wrap:wrap;gap:12px}.menu-btn{flex:1;min-width:80px}.user-stats-grid{grid-template-columns:repeat(2,1fr)}}.loading{display:flex;justify-content:center;align-items:center;padding:20px;color:var(--subtext-color)}.loading::after{content:'';width:20px;height:20px;border:2px solid var(--border-color);border-top:2px solid var(--blue);border-radius:50%;animation:spin 1s linear infinite;margin-left:10px}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.error-message{color:var(--red);padding:12px;background-color:rgba(243,139,168,0.1);border:1px solid var(--red);border-radius:8px;margin:16px 0}.success-message{color:var(--green);padding:12px;background-color:rgba(166,227,161,0.1);border:1px solid var(--green);border-radius:8px;margin:16px 0}


/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>